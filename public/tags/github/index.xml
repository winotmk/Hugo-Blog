<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Github on WinNote</title><link>https://winotmk.github.io/tags/github/</link><description>Recent content in Github on WinNote</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>winotmk</copyright><lastBuildDate>Fri, 21 Feb 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://winotmk.github.io/tags/github/index.xml" rel="self" type="application/rss+xml"/><item><title>Git常用命令</title><link>https://winotmk.github.io/posts/250221_git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</link><pubDate>Fri, 21 Feb 2025 00:00:00 +0000</pubDate><guid>https://winotmk.github.io/posts/250221_git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</guid><description>&lt;h3 id="1-进入本地仓库目录">&lt;strong>1. 进入本地仓库目录&lt;/strong>
&lt;/h3>&lt;p>打开终端（或 Git Bash），切换到仓库根目录：&lt;/p>
&lt;pre>&lt;code class="language-bash">cd /path/to/your-repo
&lt;/code>&lt;/pre>
&lt;hr>
&lt;h3 id="2-查看修改状态">&lt;strong>2. 查看修改状态&lt;/strong>
&lt;/h3>&lt;p>检查哪些文件被修改：&lt;/p>
&lt;pre>&lt;code class="language-bash">git status
&lt;/code>&lt;/pre>
&lt;ul>
&lt;li>红色显示的文件表示已修改但未添加到暂存区。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="3-将修改添加到暂存区">&lt;strong>3. 将修改添加到暂存区&lt;/strong>
&lt;/h3>&lt;p>添加单个文件：&lt;/p>
&lt;pre>&lt;code class="language-bash">git add 文件名
&lt;/code>&lt;/pre>
&lt;p>或添加所有修改的文件：&lt;/p>
&lt;pre>&lt;code class="language-bash">git add .
&lt;/code>&lt;/pre>
&lt;p>再次运行 &lt;code>git status&lt;/code>，绿色显示的文件表示已添加到暂存区。&lt;/p>
&lt;hr>
&lt;h3 id="4-提交修改到本地仓库">&lt;strong>4. 提交修改到本地仓库&lt;/strong>
&lt;/h3>&lt;pre>&lt;code class="language-bash">git commit -m &amp;quot;描述你的修改内容（例如：修复登录页面样式问题）&amp;quot;
&lt;/code>&lt;/pre>
&lt;ul>
&lt;li>&lt;code>-m&lt;/code> 后跟提交信息，需简洁明确（推荐使用英文或中文）。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="5-推送修改到远程仓库">&lt;strong>5. 推送修改到远程仓库&lt;/strong>
&lt;/h3>&lt;p>将本地提交推送到远程仓库（默认分支通常是 &lt;code>main&lt;/code> 或 &lt;code>master&lt;/code>）：&lt;/p>
&lt;pre>&lt;code class="language-bash">git push origin 分支名
&lt;/code>&lt;/pre>
&lt;ul>
&lt;li>例如推送到 &lt;code>main&lt;/code> 分支：
&lt;pre>&lt;code class="language-bash">git push origin main
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="6-验证推送结果">&lt;strong>6. 验证推送结果&lt;/strong>
&lt;/h3>&lt;ul>
&lt;li>访问远程仓库页面（如 GitHub），检查文件是否更新。&lt;/li>
&lt;li>或通过命令查看远程状态：
&lt;pre>&lt;code class="language-bash">git log --oneline # 查看本地提交记录
git remote show origin # 检查远程仓库状态
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="常见问题">&lt;strong>常见问题&lt;/strong>
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>提交后发现漏了文件&lt;/strong>：&lt;/p>
&lt;pre>&lt;code class="language-bash"># 继续修改文件，然后再次添加并提交
git add 漏掉的文件名
git commit --amend # 合并到上一次提交
git push -f origin 分支名 # 强制推送（仅限自己的分支）
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>推送冲突&lt;/strong>（多人协作时可能发生）：&lt;/p>
&lt;pre>&lt;code class="language-bash">git pull origin 分支名 # 先拉取远程最新代码，解决冲突后再推送
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;p>默认情况下直接使用 &lt;code>git clone&lt;/code> 不会自动克隆子模块（submodule）。子模块信息虽然记录在 &lt;code>.gitmodules&lt;/code> 文件中，但其代码需要额外操作才能同步到本地。&lt;/p>
&lt;hr>
&lt;h3 id="如何完整克隆包含子模块的仓库">&lt;strong>如何完整克隆包含子模块的仓库？&lt;/strong>
&lt;/h3>&lt;h4 id="方法-1递归克隆推荐">&lt;strong>方法 1：递归克隆（推荐）&lt;/strong>
&lt;/h4>&lt;p>在克隆时添加 &lt;code>--recurse-submodules&lt;/code> 参数，&lt;strong>一次性递归克隆主仓库和所有子模块&lt;/strong>：&lt;/p>
&lt;pre>&lt;code class="language-bash">git clone --recurse-submodules 仓库URL
&lt;/code>&lt;/pre>
&lt;hr>
&lt;h4 id="方法-2克隆后初始化子模块">&lt;strong>方法 2：克隆后初始化子模块&lt;/strong>
&lt;/h4>&lt;p>如果已经用普通方式克隆了主仓库，后续可以手动拉取子模块：&lt;/p>
&lt;pre>&lt;code class="language-bash"># 进入主仓库目录
cd your-repo
# 初始化子模块配置（从 .gitmodules 读取）
git submodule init
# 拉取子模块代码
git submodule update
# 或者合并成一步：
git submodule update --init
&lt;/code>&lt;/pre>
&lt;hr>
&lt;h3 id="验证子模块">&lt;strong>验证子模块&lt;/strong>
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>查看子模块目录是否包含文件（不再是空文件夹）：&lt;/p>
&lt;pre>&lt;code class="language-bash">ls -la path/to/submodule
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>检查子模块状态：&lt;/p>
&lt;pre>&lt;code class="language-bash">git submodule status
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="常见问题-1">&lt;strong>常见问题&lt;/strong>
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>子模块更新失败&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>确保子模块的仓库地址可访问（尤其是私有仓库）。&lt;/li>
&lt;li>如果子模块本身也有嵌套子模块，使用：
&lt;pre>&lt;code class="language-bash">git submodule update --init --recursive
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>切换分支后子模块内容异常&lt;/strong>：
主仓库切换分支时，子模块可能需要同步更新到对应提交：&lt;/p>
&lt;pre>&lt;code class="language-bash">git submodule update --remote
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="子模块工作原理">&lt;strong>子模块工作原理&lt;/strong>
&lt;/h3>&lt;ul>
&lt;li>主仓库只记录子模块的&lt;strong>具体提交哈希&lt;/strong>，不保存子模块的代码。&lt;/li>
&lt;li>子模块是独立的仓库，需要单独拉取和更新。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="设置代理">设置代理
&lt;/h2>&lt;p>git config &amp;ndash;global http.proxy http://127.0.0.1:7080
git config &amp;ndash;global https.proxy https://127.0.0.1:7080
取消设置代理
git config &amp;ndash;global &amp;ndash;unset http.proxy
git config &amp;ndash;global &amp;ndash;unset https.proxy
可以通过
git config -l
查看设置状态&lt;/p></description></item><item><title>Hugo_GithubAction自动部署到阿里云OSS</title><link>https://winotmk.github.io/posts/250221_hugo_githubaction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91oss/</link><pubDate>Thu, 20 Feb 2025 00:00:00 +0000</pubDate><guid>https://winotmk.github.io/posts/250221_hugo_githubaction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91oss/</guid><description>&lt;p>整了大半天，总算明白GithubAction是怎么用的了，给人感觉其实有那么些像docker，而需要为其写的action规则又像dockerfile或者dockercompose，它们都是去调用一些已经做好的功能/镜像，来按步骤去一步步达成一些事
参考文章：
&lt;a class="link" href="https://thooooor.github.io/posts/%E8%84%B1%E5%9D%91%E8%AE%B0%E5%BD%95/hugo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" target="_blank" rel="noopener"
>https://thooooor.github.io/posts/%E8%84%B1%E5%9D%91%E8%AE%B0%E5%BD%95/hugo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/&lt;/a>
&lt;a class="link" href="https://kingtuo123.com/posts/hugo-deploy/" target="_blank" rel="noopener"
>https://kingtuo123.com/posts/hugo-deploy/&lt;/a>
&lt;a class="link" href="https://zhuanlan.zhihu.com/p/367426039" target="_blank" rel="noopener"
>https://zhuanlan.zhihu.com/p/367426039&lt;/a>&lt;/p>
&lt;h2 id="参考链接">参考链接
&lt;/h2>&lt;p>action：
&lt;a class="link" href="https://github.com/manyuanrong/setup-ossutil" target="_blank" rel="noopener"
>https://github.com/manyuanrong/setup-ossutil&lt;/a>
&lt;a class="link" href="https://github.com/peaceiris/actions-hugo" target="_blank" rel="noopener"
>https://github.com/peaceiris/actions-hugo&lt;/a>&lt;/p>
&lt;p>hugo和其主题：
&lt;a class="link" href="https://gohugo.io/getting-started/quick-start/" target="_blank" rel="noopener"
>https://gohugo.io/getting-started/quick-start/&lt;/a>
&lt;a class="link" href="https://github.com/adityatelange/hugo-PaperMod" target="_blank" rel="noopener"
>https://github.com/adityatelange/hugo-PaperMod&lt;/a>&lt;/p>
&lt;p>当你通过 &lt;code>git push&lt;/code> 触发 GitHub Actions 流程时，需要将 &lt;strong>Hugo 博客的源代码&lt;/strong>推送到仓库。以下是具体操作步骤和本地准备：&lt;/p>
&lt;hr>
&lt;h3 id="一本地准备工作">&lt;strong>一、本地准备工作&lt;/strong>
&lt;/h3>&lt;h4 id="1-项目结构要求">1. &lt;strong>项目结构要求&lt;/strong>
&lt;/h4>&lt;p>你的本地 Hugo 博客项目需要包含以下内容：&lt;/p>
&lt;pre>&lt;code>your-blog-repo/
├── .github/workflows/deploy.yml # 你的 GitHub Actions 配置文件
├── content/ # 博客文章
├── themes/ # Hugo 主题（通常作为 Git 子模块）
├── config.toml # Hugo 配置文件
└── (其他 Hugo 相关文件)
&lt;/code>&lt;/pre>
&lt;h4 id="2-本地环境配置">2. &lt;strong>本地环境配置&lt;/strong>
&lt;/h4>&lt;ul>
&lt;li>&lt;strong>安装 Git&lt;/strong>：确保已安装 Git 并配置好 GitHub 账户。&lt;/li>
&lt;li>&lt;strong>安装 Hugo&lt;/strong>（可选）：&lt;br>
建议本地安装 Hugo 用于测试（与 Actions 中版本一致）：
&lt;pre>&lt;code class="language-bash">brew install hugo # macOS
# 或参考 Hugo 官方文档 https://gohugo.io/installation/
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;h4 id="3-初始化-git-仓库">3. &lt;strong>初始化 Git 仓库&lt;/strong>
&lt;/h4>&lt;pre>&lt;code class="language-bash">cd your-blog-repo
git init
git remote add origin https://github.com/你的用户名/你的仓库名.git
&lt;/code>&lt;/pre>
&lt;h4 id="4-处理子模块主题">4. &lt;strong>处理子模块（主题）&lt;/strong>
&lt;/h4>&lt;p>如果使用了 Hugo 主题（如通过 Git 子模块添加）：&lt;/p>
&lt;pre>&lt;code class="language-bash"># 示例：添加主题为子模块
git submodule add https://github.com/主题作者/主题仓库.git themes/主题名
&lt;/code>&lt;/pre>
&lt;p>确保 &lt;code>.gitmodules&lt;/code> 文件已提交。&lt;/p>
&lt;hr>
&lt;h3 id="二触发-actions-的-push-内容">&lt;strong>二、触发 Actions 的 Push 内容&lt;/strong>
&lt;/h3>&lt;p>你需要将以下内容推送到 GitHub 仓库：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Hugo 源文件&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;code>config.toml&lt;/code>（Hugo 配置）&lt;/li>
&lt;li>&lt;code>content/&lt;/code>（文章）&lt;/li>
&lt;li>&lt;code>themes/&lt;/code>（主题，通常以子模块形式存在）&lt;/li>
&lt;li>&lt;code>archetypes/&lt;/code>、&lt;code>static/&lt;/code> 等其他 Hugo 所需文件&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>GitHub Actions 配置文件&lt;/strong>&lt;br>
确保 &lt;code>.github/workflows/deploy.yml&lt;/code> 文件存在于仓库中。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>不包含生成的文件&lt;/strong>&lt;br>
&lt;strong>不要推送&lt;/strong> &lt;code>public/&lt;/code> 目录（Hugo 生成的静态文件会被 Actions 自动构建）。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="三操作流程示例">&lt;strong>三、操作流程示例&lt;/strong>
&lt;/h3>&lt;h4 id="1-本地修改并测试">1. &lt;strong>本地修改并测试&lt;/strong>
&lt;/h4>&lt;pre>&lt;code class="language-bash"># 本地生成静态文件测试（可选）
hugo server -D # 启动本地预览
&lt;/code>&lt;/pre>
&lt;h4 id="2-提交代码">2. &lt;strong>提交代码&lt;/strong>
&lt;/h4>&lt;pre>&lt;code class="language-bash">git add .
git commit -m &amp;quot;更新博客内容&amp;quot;
&lt;/code>&lt;/pre>
&lt;h4 id="3-推送到-github">3. &lt;strong>推送到 GitHub&lt;/strong>
&lt;/h4>&lt;pre>&lt;code class="language-bash">git push -u origin main # 假设主分支是 main
&lt;/code>&lt;/pre>
&lt;h4 id="4-触发-actions">4. &lt;strong>触发 Actions&lt;/strong>
&lt;/h4>&lt;p>推送后，到 GitHub 仓库的 &lt;strong>Actions&lt;/strong> 标签页查看运行状态。&lt;br>
若流程成功，阿里云 OSS 的存储桶中会自动出现 &lt;code>public/&lt;/code> 的内容。&lt;/p>
&lt;hr>
&lt;h3 id="四关键注意事项">&lt;strong>四、关键注意事项&lt;/strong>
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>分支匹配&lt;/strong>&lt;br>
确保工作流配置中的 &lt;code>push&lt;/code> 事件分支（默认所有分支）与你推送的分支一致。&lt;br>
（若需限制分支，可在配置中指定：&lt;code>on.push.branches: [main]&lt;/code>）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>密钥安全&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>阿里云的 &lt;code>OSS_KEY_ID&lt;/code> 和 &lt;code>OSS_KEY_SECRET&lt;/code> 必须通过 GitHub 仓库的 &lt;strong>Settings → Secrets&lt;/strong> 添加，&lt;strong>不要明文写在代码中&lt;/strong>。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>子模块更新&lt;/strong>&lt;br>
如果主题子模块有更新，需在本地执行：&lt;/p>
&lt;pre>&lt;code class="language-bash">git submodule update --remote --merge
git add themes/主题名
git commit -m &amp;quot;更新主题&amp;quot;
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>调试失败问题&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>若 Actions 运行失败，检查日志中的报错信息（如 Hugo 版本冲突、OSS 权限不足等）。&lt;/li>
&lt;li>本地可通过 &lt;code>hugo --minify&lt;/code> 命令预验证构建是否正常。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="五流程图解">&lt;strong>五、流程图解&lt;/strong>
&lt;/h3>&lt;pre>&lt;code>本地修改博客内容 → 提交并推送 → GitHub 触发 Actions → 自动构建 Hugo → 上传到 OSS
（无需手动操作部署）
&lt;/code>&lt;/pre>
&lt;p>通过这种方式，你只需专注于内容创作和本地代码修改，部署过程会完全自动化。&lt;/p>
&lt;h2 id="其他">其他
&lt;/h2>&lt;p>hexo的GithubAction自动部署，用了两个仓库——github.io与hexo项目仓库区分操作
&lt;a class="link" href="https://hackergavin.com/2024/01/11/hexo-automate-deploy/#%E5%88%9B%E5%BB%BA-Github-Actions-%E8%84%9A%E6%9C%AC" target="_blank" rel="noopener"
>https://hackergavin.com/2024/01/11/hexo-automate-deploy/#%E5%88%9B%E5%BB%BA-Github-Actions-%E8%84%9A%E6%9C%AC&lt;/a>&lt;/p>
&lt;p>另外一种hexo部署
&lt;a class="link" href="https://cloud.tencent.com/developer/article/2369534" target="_blank" rel="noopener"
>https://cloud.tencent.com/developer/article/2369534&lt;/a>&lt;/p></description></item><item><title>生成秘钥连接至github————用来推hexo</title><link>https://winotmk.github.io/posts/%E7%94%9F%E6%88%90%E7%A7%98%E9%92%A5%E8%BF%9E%E6%8E%A5%E8%87%B3github_%E7%94%A8%E6%9D%A5%E6%8E%A8hexo/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://winotmk.github.io/posts/%E7%94%9F%E6%88%90%E7%A7%98%E9%92%A5%E8%BF%9E%E6%8E%A5%E8%87%B3github_%E7%94%A8%E6%9D%A5%E6%8E%A8hexo/</guid><description>&lt;h2 id="生成秘钥">生成秘钥
&lt;/h2>&lt;pre>&lt;code>ssh-keygen -t ed25519 -C &amp;quot;550330147@qq.com&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>邮箱自然是我的git注册邮箱&lt;/p>
&lt;h2 id="如果修改passphrade密码">如果修改passphrade密码
&lt;/h2>&lt;pre>&lt;code>ssh-keygen -p -f ~/.ssh/id_ed25519
&lt;/code>&lt;/pre>
&lt;p>直接enter即密码为空，这是秘钥的密码&lt;/p>
&lt;h2 id="复制秘钥到github">复制秘钥到github
&lt;/h2>&lt;p>&lt;img src="https://winotmk.github.io/images/20230618002355.png"
loading="lazy"
>
打开/root/.ssh/id_ed25519.pub
复制到这里
&lt;img src="https://winotmk.github.io/images/20230618002554.png"
loading="lazy"
>
&lt;a class="link" href="https://github.com/settings/ssh/new" target="_blank" rel="noopener"
>https://github.com/settings/ssh/new&lt;/a>&lt;/p>
&lt;p>PS官方已不推荐用rsa加密&lt;/p>
&lt;h2 id="测试">测试
&lt;/h2>&lt;pre>&lt;code>ssh -T git@github.com
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="https://winotmk.github.io/images/20230618003332.png"
loading="lazy"
>
这里输入yes
&lt;img src="https://winotmk.github.io/images/20230618003428.png"
loading="lazy"
>
成功！&lt;/p></description></item></channel></rss>