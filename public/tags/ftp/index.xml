<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ftp on WinNote</title><link>https://winotmk.github.io/tags/ftp/</link><description>Recent content in Ftp on WinNote</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>winotmk</copyright><lastBuildDate>Mon, 17 Jun 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://winotmk.github.io/tags/ftp/index.xml" rel="self" type="application/rss+xml"/><item><title>令人头疼的vsftpd,ftp端口修改设置配置</title><link>https://winotmk.github.io/posts/240617_%E4%BB%A4%E4%BA%BA%E5%A4%B4%E7%96%BC%E7%9A%84vsftpd/</link><pubDate>Mon, 17 Jun 2024 00:00:00 +0000</pubDate><guid>https://winotmk.github.io/posts/240617_%E4%BB%A4%E4%BA%BA%E5%A4%B4%E7%96%BC%E7%9A%84vsftpd/</guid><description>&lt;p>这么个小小的软件花费了不成正比的时间去弄他，十分令人头疼，简单记录几点重要的设置&lt;/p>
&lt;pre>&lt;code>vim /etc/vsftpd.conf
&lt;/code>&lt;/pre>
&lt;p>vsftpd 配置文件：
&lt;a class="link" href="https://gnu-linux.readthedocs.io/zh/latest/Chapter02/90_vsftpd.html" target="_blank" rel="noopener"
>https://gnu-linux.readthedocs.io/zh/latest/Chapter02/90_vsftpd.html&lt;/a>&lt;/p>
&lt;h2 id="修改ftp的端口">修改ftp的端口
&lt;/h2>&lt;p>ftp的监听和实际数据传输是两个端口，如果要改最好都改&lt;/p>
&lt;pre>&lt;code>connect_from_port_20=NO
ftp_data_port=12520
listen_port=12521
&lt;/code>&lt;/pre>
&lt;p>pasv模式时的端口范围设置，假如用docker运行这些端口都要转出来&lt;/p>
&lt;pre>&lt;code>pasv_promiscuous=YES
pasv_min_port=31100
pasv_max_port=31110
&lt;/code>&lt;/pre>
&lt;p>我至今没太搞明白ftp的主动与被动模式的区别，以及能不能只用其中一种模式来工作..&lt;/p>
&lt;p>另外还有系统的services里&lt;/p>
&lt;pre>&lt;code>vim /etc/services
#ftp-data 20/tcp
#ftp-data 20/udp
ftp-data 12520/tcp
ftp-data 12520/udp
&lt;/code>&lt;/pre>
&lt;p>这个不确定是否必要但还是改了吧&lt;/p>
&lt;h2 id="中文乱码">中文乱码
&lt;/h2>&lt;p>&lt;img src="https://winotmk.github.io/images/20240617155755.png"
loading="lazy"
>&lt;/p>
&lt;p>一篇不错的配置说明
&lt;a class="link" href="https://blog.starryvoid.com/archives/1044.html" target="_blank" rel="noopener"
>https://blog.starryvoid.com/archives/1044.html&lt;/a>
主要提到了utf8的编码问题&lt;/p>
&lt;p>&lt;code>utf8_filesystem=YES&lt;/code>&lt;/p>
&lt;p>如果这样还没解决，考虑是要修改容器本身的&lt;code>LANG&lt;/code>
可以直接进入容器然后类似：
export LANG=C.UTF-8
或者
export LANG=en_US.UTF-8
输入locale查看结果
当然这样关了这个sh就没了，所以可以直接加到docker启动时的环境变量里
&lt;a class="link" href="https://zihengcat.github.io/2018/09/10/change-locale-system-encoding-in-docker-container/" target="_blank" rel="noopener"
>https://zihengcat.github.io/2018/09/10/change-locale-system-encoding-in-docker-container/&lt;/a>
然后你猜怎么着，做完这些设置以后中文依然显示为乱码，但是在FileZilla里看却没问题&lt;/p>
&lt;p>&lt;img src="https://winotmk.github.io/images/20240618170337.png"
loading="lazy"
>&lt;/p>
&lt;p>现在高度怀疑是VScode的这个SFTP同步插件的锅&lt;/p></description></item></channel></rss>