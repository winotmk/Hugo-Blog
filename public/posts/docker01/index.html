<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=8560&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="\r‰∏ÄÂè£Ê∞îÊ≠•Â≠êËøàÂæóÊúâÂ§ßÔºåÊÖ¢ÊÖ¢ËÆ∞ÂΩï‰∏Ä‰∏ã,Â¶ÇÊûú‰Ω†Á¢∞Â∑ßÁúãÂà∞Ëøô‰∏™ÊñáÁ´†ÔºåÂ∏åÊúõËøô‰∏™ÊñáÁ´†ÁöÑÊüê‰∫õÈÉ®ÂàÜÂØπ‰Ω†ÊúâÂ∏ÆÂä©ÔºåÊù•Ê∫êÊàëÂ∑≤Â∞ΩÈáèÂú®ÊñáÁ´†‰∏≠Ê†áÂá∫ÔºåËøòÊúâÂæàÂ§öÈÉ®ÂàÜÊòØËá™Â∑±Êï≤ÁöÑ\n">
<title>Docker01_Áî®dockerÊûÑÂª∫hexoÂíåvsftpd‰∏éddnsÈïúÂÉèÂπ∂‰∏îÁî®ÈòøÈáå‰∫ëÂÆπÂô®ÊúçÂä°ECIËøêË°å</title>

<link rel='canonical' href='http://localhost:8560/posts/docker01/'>

<link rel="stylesheet" href="/scss/style.min.eea3370ed909d956e6cf1eb5e6394f18aaefe515e6517f33ed4cf2d3958e98fc.css"><meta property='og:title' content="Docker01_Áî®dockerÊûÑÂª∫hexoÂíåvsftpd‰∏éddnsÈïúÂÉèÂπ∂‰∏îÁî®ÈòøÈáå‰∫ëÂÆπÂô®ÊúçÂä°ECIËøêË°å">
<meta property='og:description' content="\r‰∏ÄÂè£Ê∞îÊ≠•Â≠êËøàÂæóÊúâÂ§ßÔºåÊÖ¢ÊÖ¢ËÆ∞ÂΩï‰∏Ä‰∏ã,Â¶ÇÊûú‰Ω†Á¢∞Â∑ßÁúãÂà∞Ëøô‰∏™ÊñáÁ´†ÔºåÂ∏åÊúõËøô‰∏™ÊñáÁ´†ÁöÑÊüê‰∫õÈÉ®ÂàÜÂØπ‰Ω†ÊúâÂ∏ÆÂä©ÔºåÊù•Ê∫êÊàëÂ∑≤Â∞ΩÈáèÂú®ÊñáÁ´†‰∏≠Ê†áÂá∫ÔºåËøòÊúâÂæàÂ§öÈÉ®ÂàÜÊòØËá™Â∑±Êï≤ÁöÑ\n">
<meta property='og:url' content='http://localhost:8560/posts/docker01/'>
<meta property='og:site_name' content='WinNote'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='hexo' /><meta property='article:tag' content='next' /><meta property='article:tag' content='docker' /><meta property='article:tag' content='ÈòøÈáå‰∫ë' /><meta property='article:tag' content='eci' /><meta property='article:published_time' content='2023-08-05T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2023-08-05T00:00:00&#43;00:00'/><meta property='og:image' content='https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png' />
<meta name="twitter:title" content="Docker01_Áî®dockerÊûÑÂª∫hexoÂíåvsftpd‰∏éddnsÈïúÂÉèÂπ∂‰∏îÁî®ÈòøÈáå‰∫ëÂÆπÂô®ÊúçÂä°ECIËøêË°å">
<meta name="twitter:description" content="\r‰∏ÄÂè£Ê∞îÊ≠•Â≠êËøàÂæóÊúâÂ§ßÔºåÊÖ¢ÊÖ¢ËÆ∞ÂΩï‰∏Ä‰∏ã,Â¶ÇÊûú‰Ω†Á¢∞Â∑ßÁúãÂà∞Ëøô‰∏™ÊñáÁ´†ÔºåÂ∏åÊúõËøô‰∏™ÊñáÁ´†ÁöÑÊüê‰∫õÈÉ®ÂàÜÂØπ‰Ω†ÊúâÂ∏ÆÂä©ÔºåÊù•Ê∫êÊàëÂ∑≤Â∞ΩÈáèÂú®ÊñáÁ´†‰∏≠Ê†áÂá∫ÔºåËøòÊúâÂæàÂ§öÈÉ®ÂàÜÊòØËá™Â∑±Êï≤ÁöÑ\n"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png' />
    <link rel="shortcut icon" href="/favicon.png" />

        
        <link rel="stylesheet" href="/highlight/styles/base16/eighties.css">
        <script src="/highlight/highlight.min.js"></script>
        
        <script src="/clipboard.min.js"></script>
        <script src="/copy-to-clipboard.js"></script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "light");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_1b0ce47a1c2b08eb.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ü™ê</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">WinNote</a></h1>
            <h2 class="site-description">Èõ∂Á¢éMDÊñáÊ°£Êî∂ÈõÜ|ÁîüÂëΩÂú®‰∫éÊäòËÖæ</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/193498'
                        target="_blank"
                        title="Bilibili"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/winotmk/Hugo-Blog'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://winotmk.com'
                        target="_blank"
                        title="Homepage"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-home-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 12l-9 -9l-9 9h2v7a2 2 0 0 0 2 2h6" /><path d="M9 21v-6a2 2 0 0 1 2 -2h2c.39 0 .754 .112 1.061 .304" /><path d="M19 21.5l2.518 -2.58a1.74 1.74 0 0 0 0 -2.413a1.627 1.627 0 0 0 -2.346 0l-.168 .172l-.168 -.172a1.627 1.627 0 0 0 -2.346 0a1.74 1.74 0 0 0 0 2.412l2.51 2.59z" /></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>È¶ñÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÈìæÊé•</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



            <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        </div>
        
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#1-docker-Âü∫Êú¨Êìç‰Ωú">1. docker Âü∫Êú¨Êìç‰Ωú</a>
      <ol>
        <li><a href="#11-ËøêË°åÂÆπÂô®">1.1 ËøêË°åÂÆπÂô®</a></li>
        <li><a href="#12-Â∞ÜÊ≠§ÂÆπÂô®-commit-‰øùÂ≠ò‰∏∫Êñ∞ÈïúÂÉè">1.2 Â∞ÜÊ≠§ÂÆπÂô® commit ‰øùÂ≠ò‰∏∫Êñ∞ÈïúÂÉèÔºö</a></li>
        <li><a href="#13-ÂêØÂä®dockerÂºïÊìéÊó∂Ëá™Âä®ËøêË°ådockerÂÆπÂô®">1.3 ÂêØÂä®dockerÂºïÊìéÊó∂Ëá™Âä®ËøêË°ådockerÂÆπÂô®Ôºö</a></li>
        <li><a href="#14-ÊúâÂÖ≥dockerfile">1.4 ÊúâÂÖ≥dockerfile</a>
          <ol>
            <li><a href="#ÁºñÂÜôdockerfile">ÁºñÂÜôdockerfile</a></li>
            <li><a href="#Áî®dockerfileÊûÑÂª∫ÈïúÂÉè">Áî®dockerfileÊûÑÂª∫ÈïúÂÉè</a></li>
            <li><a href="#141-entrypoint‰∏écmdÁöÑÂå∫Âà´">1.4.1 ENTRYPOINT‰∏éCMDÁöÑÂå∫Âà´</a></li>
            <li><a href="#142-dockerfileÊûÑÂª∫ÈïúÂÉèÊó∂Â¶Ç‰ΩïÈÄâÊã©fromÈïúÂÉè‰ª•ÂáèÂ∞èÈïúÂÉè‰ΩìÁßØ">1.4.2 dockerfileÊûÑÂª∫ÈïúÂÉèÊó∂Â¶Ç‰ΩïÈÄâÊã©FROMÈïúÂÉè‰ª•ÂáèÂ∞èÈïúÂÉè‰ΩìÁßØ</a></li>
          </ol>
        </li>
        <li><a href="#15-Â∞ÜÂ∑≤ÊúâÈïúÂÉèÊâìÂåÖÂ∏¶Ëµ∞‰ΩøÁî®Â∞ÜÊâìÂåÖÊù•ÁöÑÈïúÂÉè">1.5 Â∞ÜÂ∑≤ÊúâÈïúÂÉèÊâìÂåÖÂ∏¶Ëµ∞/‰ΩøÁî®Â∞ÜÊâìÂåÖÊù•ÁöÑÈïúÂÉè</a>
          <ol>
            <li><a href="#Â∞ÜÈïúÂÉè‰øùÂ≠ò‰∏∫Êú¨Âú∞Êñá‰ª∂">Â∞ÜÈïúÂÉè‰øùÂ≠ò‰∏∫Êú¨Âú∞Êñá‰ª∂</a></li>
            <li><a href="#‰ªéÊñá‰ª∂ËΩΩÂÖ•ÈïúÂÉè">‰ªéÊñá‰ª∂ËΩΩÂÖ•ÈïúÂÉè</a></li>
          </ol>
        </li>
        <li><a href="#16-dockerÊåÇËΩΩÊú¨Âú∞ÁõÆÂΩï">1.6 dockerÊåÇËΩΩÊú¨Âú∞ÁõÆÂΩï</a></li>
        <li><a href="#17-ÂÖ∂‰ªñ‰∏Ä‰∫õÊìç‰Ωú">1.7 ÂÖ∂‰ªñ‰∏Ä‰∫õÊìç‰Ωú</a></li>
      </ol>
    </li>
    <li><a href="#2-Â∑≤ÂêØÂä®ÂÆπÂô®Êìç‰Ωú">2. Â∑≤ÂêØÂä®ÂÆπÂô®Êìç‰Ωú</a>
      <ol>
        <li><a href="#21-win10‰∏ãdockerÁªôÂ∑≤Â≠òÂú®ÁöÑÂÆπÂô®Ê∑ªÂä†Á´ØÂè£Êò†Â∞ÑÁöÑÊñπÊ≥ï">2.1 win10‰∏ãdockerÁªôÂ∑≤Â≠òÂú®ÁöÑÂÆπÂô®Ê∑ªÂä†Á´ØÂè£Êò†Â∞ÑÁöÑÊñπÊ≥ï</a></li>
        <li><a href="#22-dockerÂÆπÂô®ÂÜÖÊúçÂä°ÂºÄÊú∫Ëá™ÂêØÂä®ÂÆûÁé∞ÊñπÊ°à‰ª•sshÊúçÂä°‰∏∫‰æã">2.2 dockerÂÆπÂô®ÂÜÖÊúçÂä°ÂºÄÊú∫Ëá™ÂêØÂä®ÂÆûÁé∞ÊñπÊ°àÔºà‰ª•sshÊúçÂä°‰∏∫‰æãÔºâ</a>
          <ol>
            <li><a href="#221-ÊãìÂ±ïbashrc-etcbashrc-etcprofile‰∏â‰∏™Êñá‰ª∂ÁöÑÂå∫Âà´">2.2.1 ÊãìÂ±ïÔºö~/.bashrc /etc/bashrc /etc/profile‰∏â‰∏™Êñá‰ª∂ÁöÑÂå∫Âà´</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#3-ÊâìÂåÖÂà∂‰ΩúËá™Â∑±ÁöÑdockerÈïúÂÉèdockerfile">3 ÊâìÂåÖÂà∂‰ΩúËá™Â∑±ÁöÑdockerÈïúÂÉè(dockerfile)</a>
      <ol>
        <li><a href="#31-nodejsgithexoÈïúÂÉè">3.1 node.js+git+hexoÈïúÂÉè</a>
          <ol>
            <li><a href="#311-dockerfile">3.1.1 Dockerfile</a></li>
            <li><a href="#312-nodejsgithexoÈïúÂÉècopyÁöÑÊñá‰ª∂">3.1.2 node.js+git+hexoÈïúÂÉèCOPYÁöÑÊñá‰ª∂</a></li>
            <li><a href="#313-ÂºÄÂßãÊûÑÂª∫ÈïúÂÉè">3.1.3 ÂºÄÂßãÊûÑÂª∫ÈïúÂÉè</a></li>
            <li><a href="#314-ÊµãËØïÈïúÂÉèÂäüËÉΩ">3.1.4 ÊµãËØïÈïúÂÉèÂäüËÉΩ</a></li>
            <li><a href="#315-ËÆæÁΩÆÂíåÂÜçÊâìÂåÖÈïúÂÉè">3.1.5 ËÆæÁΩÆÂíåÂÜçÊâìÂåÖÈïúÂÉè</a></li>
            <li><a href="#316-ÈôÑ‰∏Ä‰∫õÂëΩ‰ª§ÂèÇËÄÉ">3.1.6 ÈôÑ‰∏Ä‰∫õÂëΩ‰ª§ÂèÇËÄÉ</a></li>
          </ol>
        </li>
        <li><a href="#32-vsftpdÈïúÂÉè">3.2 vsftpdÈïúÂÉè</a>
          <ol>
            <li><a href="#321-dockerfile">3.2.1 Dockerfile</a></li>
            <li><a href="#322-vsftpdÈïúÂÉècopyÁöÑÊñá‰ª∂">3.2.2 vsftpdÈïúÂÉèCOPYÁöÑÊñá‰ª∂</a></li>
          </ol>
        </li>
        <li><a href="#33-ddnsÈïúÂÉè">3.3 ddnsÈïúÂÉè</a>
          <ol>
            <li><a href="#331-dockerfile">3.3.1 dockerfile</a></li>
            <li><a href="#332-ddnsÈïúÂÉècopyÁöÑÊñá‰ª∂">3.3.2 ddnsÈïúÂÉèCOPYÁöÑÊñá‰ª∂</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#4-dockerÈïúÂÉèÊâìÂåÖÂπ∂‰∏ä‰º†Âà∞ÈòøÈáå‰∫ëÈïúÂÉèÂ∫ìark">4 dockerÈïúÂÉèÊâìÂåÖÂπ∂‰∏ä‰º†Âà∞ÈòøÈáå‰∫ëÈïúÂÉèÂ∫ìARK</a>
      <ol>
        <li><a href="#41-Â∞ÜÈïúÂÉèÊé®ÈÄÅÂà∞registry">4.1 Â∞ÜÈïúÂÉèÊé®ÈÄÅÂà∞Registry</a></li>
        <li><a href="#42-Âú®ÈòøÈáå‰∫ë‰∏ä‰ΩøÁî®ÂÆπÂô®ÂÆû‰æãeciËøêË°åÈïúÂÉè">4.2 Âú®ÈòøÈáå‰∫ë‰∏ä‰ΩøÁî®ÂÆπÂô®ÂÆû‰æãÔºàECIÔºâËøêË°åÈïúÂÉè</a></li>
      </ol>
    </li>
    <li><a href="#5-eciÂÆπÂô®ÂàõÂª∫Ê®°ÊùøÂíåeciÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑‰ΩøÁî®">5 eciÂÆπÂô®ÂàõÂª∫Ê®°ÊùøÂíåeciÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑‰ΩøÁî®</a>
      <ol>
        <li><a href="#51-eciÁÆÄ‰ªã">5.1 eciÁÆÄ‰ªã</a></li>
        <li><a href="#52-Áî®Ê®°ÊùøÂàõÂª∫eci">5.2 Áî®Ê®°ÊùøÂàõÂª∫eci</a></li>
      </ol>
    </li>
    <li><a href="#6-hexoÊú¨Âú∞ÁºñËæëÁéØÂ¢ÉËÆæÁΩÆÂ¶Ç‰ΩïÁî®vscodeËàíÊúçÁöÑÂÜômdÊñáÊ°£">6 hexoÊú¨Âú∞ÁºñËæëÁéØÂ¢ÉËÆæÁΩÆ‚Äî‚Äî‚Äî‚ÄîÂ¶Ç‰ΩïÁî®VSCodeËàíÊúçÁöÑÂÜôMDÊñáÊ°£</a>
      <ol>
        <li><a href="#61-vscodessh-fsÊèí‰ª∂ÈÖçÁΩÆ">6.1 VSCodeSSH FSÊèí‰ª∂ÈÖçÁΩÆ</a></li>
        <li><a href="#62-markdown-pasteÊèí‰ª∂ÈÖçÁΩÆ">6.2 Markdown PasteÊèí‰ª∂ÈÖçÁΩÆ</a>
          <ol>
            <li><a href="#ÈÖçÁΩÆ">ÈÖçÁΩÆÔºö</a></li>
            <li><a href="#‰ΩøÁî®">‰ΩøÁî®Ôºö</a></li>
          </ol>
        </li>
        <li><a href="#62-vscodeÁöÑsftpÊèí‰ª∂ÈÖçÁΩÆ">6.2 VSCodeÁöÑSFTPÊèí‰ª∂ÈÖçÁΩÆ</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
            
                <form action="/search/" class="search-form widget" >
        <p>
            <label>ÊêúÁ¥¢</label>
            <input name="keyword" required placeholder="ËæìÂÖ•ÂÖ≥ÈîÆËØç..." />
        
            <button title="ÊêúÁ¥¢">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



            </button>
        </p>
    </form>
            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    
    

    
     
     <header class="article-category">
        <div class="Winotmk_icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



        </div>
         
             <a href="/tags/hexo/" >
                 Hexo
             </a>
         
             <a href="/tags/next/" >
                 Next
             </a>
         
             <a href="/tags/docker/" >
                 Docker
             </a>
         
             <a href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91/" >
                 ÈòøÈáå‰∫ë
             </a>
         
             <a href="/tags/eci/" >
                 Eci
             </a>
         
     </header>
     

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/docker01/">Docker01_Áî®dockerÊûÑÂª∫hexoÂíåvsftpd‰∏éddnsÈïúÂÉèÂπ∂‰∏îÁî®ÈòøÈáå‰∫ëÂÆπÂô®ÊúçÂä°ECIËøêË°å</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Aug 05, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 24 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <style type="text/css" rel="stylesheet">
.nav-number { 
    display:none !important;
}
.post-toc .nav-item {
    white-space: normal !important;
}
</style>
<p>‰∏ÄÂè£Ê∞îÊ≠•Â≠êËøàÂæóÊúâÂ§ßÔºåÊÖ¢ÊÖ¢ËÆ∞ÂΩï‰∏Ä‰∏ã,Â¶ÇÊûú‰Ω†Á¢∞Â∑ßÁúãÂà∞Ëøô‰∏™ÊñáÁ´†ÔºåÂ∏åÊúõËøô‰∏™ÊñáÁ´†ÁöÑÊüê‰∫õÈÉ®ÂàÜÂØπ‰Ω†ÊúâÂ∏ÆÂä©ÔºåÊù•Ê∫êÊàëÂ∑≤Â∞ΩÈáèÂú®ÊñáÁ´†‰∏≠Ê†áÂá∫ÔºåËøòÊúâÂæàÂ§öÈÉ®ÂàÜÊòØËá™Â∑±Êï≤ÁöÑ</p>
<p>‰∫ÜËß£ECIÂºπÊÄßÂÆπÂô®Ôºöhttps://www.aliyun.com/product/eci<br>
‰∫ÜËß£ÈòøÈáå‰∫ëNASÊñá‰ª∂Â≠òÂÇ®Ôºöhttps://www.aliyun.com/product/nas</p>
<p><strong>‰∏∫‰ªÄ‰πàË¶ÅÁî®eciÊù•ËøêË°åhexoÔºü</strong><br>
Âõ†‰∏∫Â•ΩÁé©ÔºåÂêåÊó∂Êù•Â≠¶‰π†‰ªépullÂà∞ÂèëÂ∏ÉÂà∞ËøêË°åÊï¥‰∏™dockerÈïúÂÉèÁöÑÊµÅÁ®ãÔºå‰πüÊÉ≥ÁªôËá™Â∑±ÁöÑhexoÂçöÂÆ¢Êâæ‰∏™Êñ∞ÂÆ∂ÔºåÈÖ∑ÈÖ∑ÁöÑÈÇ£Áßç<br>
Êú¨ÂçöÂÆ¢‰πãÂâçÊòØÁî±Ê†ëËéìÊ¥æ‰∏äÁöÑhexoÁîüÊàêÔºåÈÉ®ÁΩ≤Âà∞github‰∏äÁöÑ<br>
ÊúÄËøëÂú®Êç£ÈºìdockerÔºå‰∏ÄÊó∂ÊÉ≥‰∏çËµ∑Êù•Êúâ‰ªÄ‰πàÁÅµÊ¥ªÂ∞èÂ∑ßÁöÑÊúçÂä°ÊãøÊù•Áî®dockerÁé©ÔºåÈÇ£‰πàÊÉ≥ÁùÄÂπ≤ËÑÜÊääÊ†ëËéìÊ¥æ‰∏ähexoËøôÈÉ®ÂàÜÊúçÂä°ÂÅöÊàêÈïúÂÉèÔºåÈúÄË¶ÅÁî®ÁöÑÊó∂ÂÄôÊãøÂá∫Êù•Áî®Áî®ÊÉ≥ÂøÖÊòØÊûÅÂ•ΩÁöÑÔºàËøô‰πà‰∏ÄÊù•Â•ΩÂÉèÊ†ëËéìÊ¥æÂèàË¶ÅÂêÉÁÅ∞‰∫ÜÔºâ<br>
ÊÅ∞Â∑ßÊúÄËøëÂèàÂú®Áê¢Á£®ÈòøÈáå‰∫ëECIÂÆπÂô®ÊúçÂä°ÔºåÊâÄ‰ª•ÁêÜËÆ∫‰∏äÊòØÂèØ‰ª•Áî®ÊàëËá™Â∑±ÊâìÂåÖÂ•ΩÁöÑÈïúÂÉèÁöÑ<br>
ÊúÄÂêéÊàêÂìÅÁöÑÁªìÊûÑÂ§ßËá¥Â¶Ç‰∏ãÂõæÔºö</p>
<p><img src="/images/20230829140549.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ËøôÈáåÊåÇ‰∫Ü3‰∏™ÈïúÂÉèÔºö<br>
<strong>1.node.js+git+ssh+hexo</strong><br>
‰∏ªË¶ÅÊòØÊ≠§ÈïúÂÉè‚Äî‚ÄîÁî±node.js+hexoÁªÑÊàêÁöÑËøêË°åhexoÁéØÂ¢ÉÔºåÁî®ËøáÁöÑÈÉΩ‰∫ÜËß£hexoÊòØÂü∫‰∫énode.jsÁöÑÔºåÊØèÊ¨°Êàë‰ª¨ÁîüÊàêÊñáÁ´†ÁöÑÊó∂ÂÄôÈÉΩ‰ºö<code>hexo g -d</code>ÔºåËÄåËøêË°åËøôÂ•óÈúÄË¶Å‰∏Ä‰∏™ÁéØÂ¢ÉÂÆπÂô®<br>
gitÂíåssh‰∏ªË¶ÅÊòØÈÉ®ÁΩ≤Âú®github‰∏äÁî®ÁöÑÔºåÂêåÊó∂Êàë‰π†ÊÉØÁî®VSCodeÁöÑSSH FSÊù•ÁÆ°ÁêÜËøúÁ®ãÊñá‰ª∂ÂíåÂÜôÂçöÂÆ¢Ôºå‰∏ªË¶ÅÊòØsshËøûÊé•Ôºå‰πüÊñπ‰æøÊàëÊãøPuTTYÂíåWinSCPËøúÁ®ãÁôªÂΩïÁÆ°ÁêÜ<br>
<strong>2.vsftpd</strong><br>
‰∏Ä‰∏™Â∏∏Áî®ÁöÑftpÊúçÂä°ÔºåÊàëÊòØÂú®Êú¨Âú∞‰∫õÂÆåÂÜç‰∏ä‰º†ÁöÑÔºåÁî®Ëøô‰∏™ÊòØÂõ†‰∏∫ÊàëÂèëÁé∞Â¶ÇÊûúË¶ÅÁªôÊñáÁ´†ÊèíÂÖ•ÂõæÁâáÔºåÊàëËøòÈúÄË¶ÅÊâãÂä®Áî®ssh‰∏ä‰º†Âà∞hexoÂØπÂ∫îÁõÆÂΩïÈáå„ÄÇËÄåÁî®VSCodeÁöÑSSH FSÂèØ‰ª•Â∏ÆÊàëËá™Âä®ÂêåÊ≠•Êú¨Âú∞Â∑•‰ΩúÁõÆÂΩïÂíå‰∫ë‰∏äÂç≥Â∞ÜÁîüÊàêÈùôÊÄÅÁΩëÈ°µÁöÑhexoÁõÆÂΩïÔºåÈùûÂ∏∏Êñπ‰æøÔºÅ<br>
<strong>3.ddns</strong><br>
Âõ†‰∏∫ÂÆπÂô®ÊòØÂç≥Áî®Âç≥ÂºÄÔºåÁî®ÂÆåÂ∞±ÈáäÊîæÁöÑÔºåÊØèÊ¨°ÂºÄ‰ºöÊñ∞ÂàÜÈÖç‰∏Ä‰∏™ÂºπÊÄßIPÂÅö‰∏∫Â§ñÁΩëÊé•Âè£Ôºå‰ΩÜÊòØ‰∏çÊÉ≥ÊØèÊ¨°ÈÉΩÂéªÂ§çÂà∂Ëøô‰∏™Êñ∞ÁöÑipÂú∞ÂùÄÔºåÈÇ£‰πàÂ∞±Ë¶ÅÁî®Âà∞Âä®ÊÄÅÂüüÂêçËß£ÊûêÔºåÂàöÂ•ΩÊàëÂú®ÈòøÈáå‰∫ë‰∏äË¥≠‰π∞Ëøá‰∏Ä‰∏™ÊàëËá™Â∑±ÁöÑÂüüÂêçÔºåÊâÄ‰ª•ddnsËøôÈÉ®ÂàÜÊúçÂä°Â∞±ÊãâÂá∫Êù•ÂÅö‰∏™ÈïúÂÉè</p>
<p>ËøòÊåÇ‰∫Ü‰∏Ä‰∏™NASÁõòÔºö<br>
<img src="/images/20230829142400.png"
	
	
	
	loading="lazy"
	
	
><br>
ÊåÇËΩΩ‰ª•ÂêéÔºö<br>
<img src="/images/20230829142501.png"
	
	
	
	loading="lazy"
	
	
><br>
ÂèØËßÅÊàëÁöÑhexoÔºå‰∏ªÈ¢òÔºåÊñáÁ´†ÔºåÂõæÁâáÁ≠âÁ≠âÈÉΩÂ≠òÊîæÂú®ÈáåÈù¢ÔºåÊúçÂä°ÂÆπÂô®ÂèØ‰ª•Èöè‰æøÈáäÊîæÊãâÂèñÔºåÊï∞ÊçÆ‰∏ç‰ºöÂèóÂà∞ÂΩ±ÂìçÔºåÂá†ÁôæMÁöÑNASÂÆπÈáè‰ª∑Ê†ºÊäπÈõ∂ÂêéÂèØ‰ª•ÂøΩÁï•‰∏çËÆ°</p>
<p>ÊñáÁ´†ÂêéÈù¢ÔºàÁ¨¨‰∏âÈÉ®ÂàÜÔºâ‰ºöËØ¥Â¶Ç‰ΩïÊåâÊàëÁöÑÈúÄÊ±ÇÊûÑÂª∫ÂÆöÂà∂ËøôÂá†‰∏™ÈïúÂÉèÔºåÂπ∂‰∏ä‰º†Âà∞ÈòøÈáå‰∫ëÂÆπÂô®ÈïúÂÉèARK‰ªìÂ∫ì‰ª•Êñπ‰æøË∞ÉÁî®</p>
<!-- more -->
<p><strong>vsftpd</strong>ËøòÊúâ<strong>ddns</strong>ÂèØ‰ª•‰∏é‰∏ªÈïúÂÉè<strong>node.js+hexo</strong>ÂêàÂπ∂Êàê‰∏Ä‰∏™Â§ßÈïúÂÉèÂêóÔºü<br>
<strong>ÂΩìÁÑ∂ÂèØ‰ª•</strong>Ôºå‰ΩÜÊàëÂÆûÈôÖÂÅö‰∫ÜÂá†Ê¨°‰ª•ÂêéÂèëÁé∞ÊääftpÔºåddnsËøôÊ†∑Â∏∏Áî®ÁöÑÊúçÂä°ÂäüËÉΩÂçïÁã¨ÊãøÂá∫Êù•‰ºöÊñπ‰æøÂæóÂ§öÁöÑÂ§öÔºåÊØïÁ´üÊàëÊÉ≥Ëµ∑Âà´ÂæóÊúçÂä°Ôºå‰πüÂèØ‰ª•Áªô‰ªñ‰ª¨ÊåÇ‰∏äftpÁ≠âÂ∏∏Áî®ÊúçÂä°ÔºåÊàë‰πüÂèØ‰ª•ÈÄâÊã©‰∏çÊåÇÔºåËøôÊ†∑ÂÆπÂô®ÁöÑ‰ºòÂäøÂ∞±‰ΩìÁé∞Âá∫Êù•‰∫Ü„ÄÇÊàëÂèØ‰ª•ÊääÂçï‰∏ÄÁöÑÊúçÂä°ÈÉΩÂÅöÊàêÂçïÁã¨ÁöÑÂ∞èÈïúÂÉèÔºåÈúÄË¶ÅÂì™‰∏™ÊåÇÂì™‰∏™ÔºåÊÄßËÉΩÊ∂àËÄó‰πüÂæàÂ∞è</p>
<p>Êï¥Â•ó‰∏ãÊù•ÊúâËøô‰∫õÈÉ®ÂàÜÔºö</p>
<ol>
<li><strong>dockerÂü∫Êú¨Êìç‰Ωú</strong></li>
<li><strong>Â∑≤ÁªèÂêØÂä®ÁöÑÊú¨Âú∞ÂÆπÂô®‰øÆÊîπÁ´ØÂè£ÔºåÂêØÂä®ÂÆπÂô®Êó∂Âç≥ÂêØÂä®ÊúçÂä°Á≠â</strong></li>
<li><strong>ÊâìÂåÖÂà∂‰ΩúËá™Â∑±ÁöÑdockerÈïúÂÉè(dockerfile)</strong></li>
<li><strong>dockerÈïúÂÉèÊâìÂåÖÂπ∂‰∏ä‰º†Âà∞ÈòøÈáå‰∫ëÈïúÂÉèÂ∫ìARK</strong></li>
<li><strong>eciÂÆπÂô®ÂàõÂª∫Ê®°ÊùøÂíåeciÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑‰ΩøÁî®</strong></li>
<li><strong>hexoÊú¨Âú∞ÁºñËæëÁéØÂ¢ÉËÆæÁΩÆ‚Äî‚Äî‚Äî‚ÄîÂ¶Ç‰ΩïÁî®VSCodeËàíÊúçÁöÑÂÜôMDÊñáÊ°£</strong></li>
</ol>
<p>ÈôÑË°®Ôºö<br>
Áæ§ÊôñÊê≠Âª∫ÁßÅÊúâÈïúÂÉè‰ªìÂ∫ìÂíådockerengineËÆæÁΩÆ<br>
eci‰ª∑Ê†ºËÆ°ÁÆóË°®</p>
<hr>
<h2 id="1-docker-Âü∫Êú¨Êìç‰Ωú">1. docker Âü∫Êú¨Êìç‰Ωú
</h2><p>Âçö‰∏ªÂêêÊßΩ‰∏Ä‰∏ãÔºåÊÄªËßâÂæó‰∏Ä‰∫õÁ±ª‰ººrunÔºåcommitÊìç‰ΩúÂÆåÂÖ®ÂèØ‰ª•ÂÅöÊàê‰∏Ä‰∏™ÁæéËßÇÂ•ΩÁî®ÁöÑUIÊéßÂà∂ËΩØ‰ª∂Ôºå‰ΩÜÊòØdocker destopÂ∞±ÊòØ‰∏çÂÅöÔºåÁÑ∂ÂêéÂ§ßÂÆ∂ÈÉΩÈªòËÆ§Êï≤ÂëΩ‰ª§Ë°åÊòØÊñπ‰æøÁöÑÔºåÂ•ΩÁî®ÁöÑ„ÄÇÂçÅÂàÜ‰∏çËß£ÔºåÂèØËÉΩÈúÄË¶ÅuiÁöÑ‰∏ç‰ºöÂÜôuiÔºåÁÜüÁªÉ‰ΩøÁî®ÂëΩ‰ª§Ë°åÁöÑ‰πü‰∏çÈúÄË¶Å‰ªÄ‰πàuiÂêßÔºåËØ∂<br>
‚Äî‚ÄîÂêéÈù¢ÈöèÁùÄÂØπdocker‰∫ÜËß£ÁöÑÊ∑±ÂÖ•ÔºåÊòéÁôΩÂÆÉ‰∏çÊòØËôöÊãüÊú∫ÔºåÁî®ÂæóËøòÊòØlinuxÂÜÖÊ†∏ÔºåËøô‰πà‰∏ÄÊÉ≥ÔºåÂ§ÑÂ§ÑÁúüÊòØÊµìÊµìÁöÑlinuxÂë≥ÔºåÁé∞Âú®ËÉΩÊèê‰æõ‰∏Ä‰∏™windows‰∏ãÁöÑDocker DesktopÊ°åÈù¢Á®ãÂ∫èÔºåÂ∑≤ÁªèÈùûÂ∏∏Âæó‰∏çÈîô‰∫ÜÔºÅ<br>
ËµÑÊñôÁΩëÁ´ôÔºö</p>
<p><a class="link" href="https://docs.docker.com/engine/reference/commandline/cli/"  target="_blank" rel="noopener"
    >ÂÆòÊñπÂëΩ‰ª§Â§ßÂÖ®</a></p>
<p><a class="link" href="https://chunchengwei.github.io/ruan-jian/ji-yu-docker-de-hexo-bo-ke-da-jian/"  target="_blank" rel="noopener"
    >Âü∫‰∫éDockerÁöÑHexoÂçöÂÆ¢Êê≠Âª∫</a></p>
<p>Ëøô‰∏™Âü∫Êú¨Êìç‰ΩúÂÜôÂæóËøòË°å‰∏ãÊ¨°Áà¨‰∏ÄÁØá‰∏ãÊù•ÂêßÔºö</p>
<p><a class="link" href="https://yingclin.github.io/2018/docker-basic.html"  target="_blank" rel="noopener"
    >[Â∞èÊäÑ] Docker Âü∫Êú¨ÂëΩ‰ª§</a></p>
<h3 id="11-ËøêË°åÂÆπÂô®">1.1 ËøêË°åÂÆπÂô®
</h3><pre><code class="language-bash">docker run -it -d --name [container-name] -p 8088:80 [image-name]
</code></pre>
<p>ËøôÈáåÊòØÂ∞ÜÂÆπÂô®ÂÜÖÁöÑ80Á´ØÂè£Êò†Â∞ÑÂà∞ÂÆø‰∏ªÊú∫ÁöÑ8088Á´ØÂè£</p>
<p>ÂèÇÊï∞ËØ¥Êòé</p>
<p><code>-d</code> Ë°®Á§∫ÂêéÂè∞ËøêË°åÂÆπÂô®<br>
<code>-t</code> ‰∏∫dockerÂàÜÈÖç‰∏Ä‰∏™‰º™ÁªàÁ´ØÂπ∂ÁªëÂÆöÂà∞ÂÆπÂô®ÁöÑÊ†áÂáÜËæìÂÖ•‰∏ä<br>
<code>-i</code> ÊòØËÆ©ÂÆπÂô®ÁöÑÊ†áÂáÜËæìÂÖ•‰øùÊåÅÊâìÂºÄÁä∂ÊÄÅ<br>
<code>-p</code> ÊåáÂÆöÊò†Â∞ÑÁ´ØÂè£</p>
<p>ËøòËÉΩËøô‰πàÂÜôÔºö</p>
<pre><code class="language-bash">docker run --name mssql -e 'ACCEPT_EULA=Y' -e 'SA_PASSWORD=xxxx' \
     -p 1433:1433  \
     -d mssql-2019-with-cimb
</code></pre>
<p><code>\</code>Â∫îËØ•ÊòØÂèØ‰ª•Êç¢Ë°åË°®Ëø∞<br>
<code>-e</code> ÂÆö‰πâÁéØÂ¢ÉÂèòÈáèÔºàÈÄöÂ∏∏Âà∂‰ΩúÈïúÂÉèÁöÑÊó∂ÂÄôÂ∫îËØ•Â∑≤ÁªèÂÜôÂ•Ω‰∫ÜÔºåÊàñËÄÖÂú®ÂÆπÂô®ÂÜÖÂÅöÂ•ΩËá™Âä®ËÑöÊú¨ÔºårunÊó∂ÂÄôÂÜçÂÜôÊØïÁ´üÊòØ‰∏çÊñπ‰æøÁöÑÔºâ</p>
<h3 id="12-Â∞ÜÊ≠§ÂÆπÂô®-commit-‰øùÂ≠ò‰∏∫Êñ∞ÈïúÂÉè">1.2 Â∞ÜÊ≠§ÂÆπÂô® commit ‰øùÂ≠ò‰∏∫Êñ∞ÈïúÂÉèÔºö
</h3><p>Ê†ºÂºèÔºö</p>
<pre><code>docker commit container-id new-name
</code></pre>
<p>container-id‰πüÂèØ‰ª•ÊòØÂ∑≤ÊúâÂÆπÂô®ÁöÑÂêçÂ≠óÔºå‰æãÂ¶ÇÔºö</p>
<pre><code>docker commit node-test nodehexo
</code></pre>
<p>nodehexoËøôÈáåÊòØÊñ∞ÈïúÂÉèÂêç</p>
<h3 id="13-ÂêØÂä®dockerÂºïÊìéÊó∂Ëá™Âä®ËøêË°ådockerÂÆπÂô®">1.3 ÂêØÂä®dockerÂºïÊìéÊó∂Ëá™Âä®ËøêË°ådockerÂÆπÂô®Ôºö
</h3><p><a class="link" href="https://blog.csdn.net/londa/article/details/97611947"  target="_blank" rel="noopener"
    >https://blog.csdn.net/londa/article/details/97611947</a></p>
<p>ps:‰∏äÈù¢ÈìæÊé•ÊñáÁ´†ËøòÊúâ:‰øÆÊîπdockerÂÆπÂô®ÁöÑÊåÇËΩΩË∑ØÂæÑÔºå‰øÆÊîπdockerÈªòËÆ§ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆ</p>
<pre><code>docker run --restart=always
</code></pre>
<p>ÊúâÊó∂ÂÄôÔºåÊàë‰ª¨ÂàõÂª∫ÂÆπÂô®Êó∂Âøò‰∫ÜÊ∑ªÂä†ÂèÇÊï∞ <code>--restart=always</code> ÔºåÂΩì Docker ÈáçÂêØÊó∂ÔºåÂÆπÂô®Êú™ËÉΩËá™Âä®ÂêØÂä®Ôºå</p>
<p>Áé∞Âú®Ë¶ÅÊ∑ªÂä†ËØ•ÂèÇÊï∞ÊÄé‰πàÂäûÂë¢ÔºåÊñπÊ≥ïÊúâ‰∫åÔºö</p>
<p>1„ÄÅDocker ÂëΩ‰ª§‰øÆÊîπ</p>
<pre><code>docker container update --restart=always ÂÆπÂô®ÂêçÂ≠ó
</code></pre>
<p>ÊàëÂÆûÈôÖËøêË°åÊó∂ÔºåÂèØ‰ª•ÊîØÊåÅÂêåÊó∂ÈÖçÁΩÆÂ§ö‰∏™ÂÆπÂô®idÔºåÊØîÂ¶ÇÔºàÂÖ∂‰∏≠containerÂÖ≥ÈîÆÂ≠óÂèØ‰ª•ÂøΩÁï•‰∏çÂÜôÔºâ</p>
<pre><code>docker update 87cd61ad7f7c f488b0479f24 2109903220ce 1fb346ea1a46 --restart=no
</code></pre>
<p>2„ÄÅÁõ¥Êé•ÊîπÈÖçÁΩÆÊñá‰ª∂</p>
<p>È¶ñÂÖàÂÅúÊ≠¢ÂÆπÂô®Ôºå‰∏çÁÑ∂Êó†Ê≥ï‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂</p>
<p>ÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑ‰∏∫Ôºö<code>/var/lib/docker/containers/</code> ÂÆπÂô®ID</p>
<p>Âú®ËØ•ÁõÆÂΩï‰∏ãÊâæÂà∞‰∏Ä‰∏™Êñá‰ª∂ hostconfig.json ÔºåÊâæÂà∞ËØ•Êñá‰ª∂‰∏≠ÂÖ≥ÈîÆÂ≠ó RestartPolicy</p>
<p>‰øÆÊîπÂâçÈÖçÁΩÆÔºö<code>&quot;RestartPolicy&quot;:{&quot;Name&quot;:&quot;no&quot;,&quot;MaximumRetryCount&quot;:0}</code></p>
<p>‰øÆÊîπÂêéÈÖçÁΩÆÔºö<code>&quot;RestartPolicy&quot;:{&quot;Name&quot;:&quot;always&quot;,&quot;MaximumRetryCount&quot;:0}</code></p>
<p>ÊúÄÂêéÂêØÂä®ÂÆπÂô®„ÄÇ</p>
<h3 id="14-ÊúâÂÖ≥dockerfile">1.4 ÊúâÂÖ≥dockerfile
</h3><p>dockerfileÊòØÁî®Êù•ÊûÑÂª∫ÈïúÂÉèÁöÑËÑöÊú¨<br>
‰∏ªË¶ÅÂèÇËÄÉËøôÂá†ÁØáÔºö<br>
<a class="link" href="https://www.runoob.com/docker/docker-dockerfile.html"  target="_blank" rel="noopener"
    >https://www.runoob.com/docker/docker-dockerfile.html</a><br>
<a class="link" href="https://developer.aliyun.com/article/484262"  target="_blank" rel="noopener"
    >https://developer.aliyun.com/article/484262</a><br>
<a class="link" href="https://juejin.cn/s/docker%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E6%97%B6%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC"  target="_blank" rel="noopener"
    >dockerÂÆπÂô®ÂêØÂä®Êó∂Ëá™Âä®ÂêØÂä®ËÑöÊú¨</a></p>
<h4 id="ÁºñÂÜôdockerfile">ÁºñÂÜôdockerfile
</h4><p>ÊàëÁöÑÁ¨¨‰∏Ä‰∏™dockerfileÔºö<br>
ÁÆÄÂçïÂÅö‰∏™ÊµãËØïÔºåÂú®‰πãÂâçÂÅöÁöÑÈïúÂÉè‰∏äÂä†‰∫ÜÊù°ÂêØÂä®ÂëΩ‰ª§<br>
<strong>Dockerfile</strong> ÔºàÊñá‰ª∂Ê≤°ÊúâÂêéÁºÄ)</p>
<pre><code>## Set the base image to CentOS  Âü∫‰∫énodehexo
FROM nodehexo:V4
COPY ddnsstart.sh /ddnsstart.sh
ENTRYPOINT [&quot;/bin/bash&quot;, &quot;/ddnsstart.sh&quot;]
</code></pre>
<p>ÂæàÁÆÄÂçï:<br>
<code>FROM</code>Âü∫‰∫é<code>nodehexo:V4</code>ÈïúÂÉèÊûÑÂª∫<br>
<code>COPY</code>Â∞±ÊòØÊã∑Ë¥ùÊûÑÂª∫ÁõÆÂΩï‰∏ãÁöÑ<code>ddnsstart.sh</code>Âà∞‰πãÂêéÊûÑÂª∫Â•ΩÁöÑÈïúÂÉèÊ†πÁõÆÂΩï‰∏ã<br>
<code>ENTRYPOINT</code>‰ºöÂú®Áî®Êñ∞ÈïúÂÉèÂºÄÂêØÂÆπÂô®Êó∂ÂÜçÊâßË°åÔºåËøôÈáå‰ºöÂú®ÊâßË°å<code>/bin/bash</code>ÈáåÊâßË°å<code>/ddnsstart.sh</code></p>
<p>‰∏Ä‰∏™dockerfileÂè™ËÉΩÊúâ‰∏ÄÊù°<code>ENTRYPOINT</code>ÔºåÂ§ö‰∏™‰πüÂè™ÊâßË°åÊúÄÂêé‰∏Ä‰∏™,<code>CMD</code>‰πüÊòØÂ¶ÇÊ≠§<br>
Â¶ÇÊûú Dockerfile ‰∏≠Â¶ÇÊûúÂ≠òÂú®Â§ö‰∏™ <code>CMD</code> Êåá‰ª§Ôºå‰ªÖÊúÄÂêé‰∏Ä‰∏™ÁîüÊïà„ÄÇ</p>
<p>ÂÖ≥‰∫é<code>CMD</code>ËøòÊúâ‰∫õÂÜôÊ≥ïÔºåÊØîÂ¶ÇËøòÂèØ‰ª•<br>
<code>CMD service ssh start &amp;&amp; service XXX start &amp;&amp; tail -f /etc/passwd</code>‰∏ÄËµ∑ÊâßË°åÂ§öÈÅìÊåá‰ª§<br>
ËøôÂú®ÊûÑÂª∫ÈïúÂÉèÁöÑÊó∂ÂÄô‰ºöË¢´Ëá™Âä®ËΩ¨Êç¢‰∏∫Á±ª‰ººÔºö<br>
<code>CMD [&quot;/bin/sh&quot;, &quot;service ssh start&quot;,&quot;service XXX start&quot;,&quot;tail -f /etc/passwd&quot;]</code></p>
<p><code>tail -f /etc/passwd</code>‰ΩúÁî®Âú®‰∫éÈò≤Ê≠¢dockerÂÆπÂô®ÂºÄÂêØÂêéÁ´ãÂç≥ÂÖ≥Èó≠ËßÅ‰∏ãÈù¢ÊÆµËêΩ</p>
<p>CMDÊ†ºÂºèÔºö</p>
<pre><code>CMD &lt;shell ÂëΩ‰ª§&gt; 
CMD [&quot;&lt;ÂèØÊâßË°åÊñá‰ª∂ÊàñÂëΩ‰ª§&gt;&quot;,&quot;&lt;param1&gt;&quot;,&quot;&lt;param2&gt;&quot;,...] 
CMD [&quot;&lt;param1&gt;&quot;,&quot;&lt;param2&gt;&quot;,...]  # ËØ•ÂÜôÊ≥ïÊòØ‰∏∫ ENTRYPOINT Êåá‰ª§ÊåáÂÆöÁöÑÁ®ãÂ∫èÊèê‰æõÈªòËÆ§ÂèÇÊï∞
</code></pre>
<p>Êé®Ëçê‰ΩøÁî®Á¨¨‰∫åÁßçÊ†ºÂºèÔºåÊâßË°åËøáÁ®ãÊØîËæÉÊòéÁ°Æ„ÄÇÁ¨¨‰∏ÄÁßçÊ†ºÂºèÂÆûÈôÖ‰∏äÂú®ËøêË°åÁöÑËøáÁ®ã‰∏≠‰πü‰ºöËá™Âä®ËΩ¨Êç¢ÊàêÁ¨¨‰∫åÁßçÊ†ºÂºèËøêË°åÔºåÂπ∂‰∏îÈªòËÆ§ÊòØ <code>bin/sh</code></p>
<p><strong>ddnsstart.shÊñá‰ª∂</strong></p>
<pre><code>#!/bin/bash
root/ddnsAPP/ddns -c root/ddnsAPP/config.json
echo &quot;Êõ¥Êñ∞mcwrite.winotmk.comËß£Êûê&quot;
service ssh start
tail -f /etc/passwd
</code></pre>
<p>ËøôÈáåÈÉΩÊòØÁÆÄÂçïÁöÑshellÂëΩ‰ª§‰∫Ü<br>
<code>root/ddnsAPP/ddns -c root/ddnsAPP/config.json</code>ÊòØÊâßË°åddnsÊõ¥Êñ∞ÔºåËß£ÊûêÊñ∞ÁöÑipÂà∞ÂüüÂêç‰∏äÔºåÂõ†‰∏∫ÊàëËøô‰∏™ÈïúÂÉèÊâìÁÆóÊîæÂà∞ÈòøÈáå‰∫ëECIÈáåË∑ëÔºåÊØèÊ¨°Êñ∞ÊãâÁöÑIPÂΩìÁÑ∂ÈÉΩ‰∏ç‰∏ÄÊ†∑Ôºà‰∏ÄÁõ¥Âç†ÁùÄ‰∏Ä‰∏™IP‰ºö‰∫ßÁîüË¥πÁî®ÔºåÊ≤°ÂøÖË¶ÅÔºâ</p>
<p>ÂêåÊó∂ÊàëËøòÊâßË°å‰∫ÜÂêØÂä®sshÊúçÂä°ÔºåÊúâÁöÑÊó∂ÂÄô‰ºöÁî®‰∏ässhÔºåÂõ†‰∏∫ÊàëÊääÁΩëÁõòÊåÇËΩΩÂà∞‰∫ÜÂÆπÂô®ÂÜÖ<br>
<code>tail -f /etc/passwd</code>ËøôÈáåËµ∑Âà∞ÁöÑÊØîËæÉÈáçË¶ÅÁöÑÂç†ÁùÄËøõÁ®ãÁöÑ‰ΩúÁî®ÔºåËØ¶ËßÅ‰∏ãÈù¢Ôºö</p>
<p>*ÂÖ≥‰∫é <code>CMD</code> Êàñ <code>entrypoint</code> ÊûÑÂª∫Âêé <code>docker run -dit</code> ‰∏∫‰ΩïÂÆπÂô®‰æùÁÑ∂ÁßíÈÄÄ<br>
<a class="link" href="https://www.zhihu.com/question/344939968"  target="_blank" rel="noopener"
    >https://www.zhihu.com/question/344939968</a><br>
ÊòØÂõ†‰∏∫‰ΩøÁî®‰∫ÜCMDÊàñËÄÖentrypointÂéªservice *** startÂëΩ‰ª§‰Ωú‰∏∫ÂÆπÂô®ÂêØÂä®ÂëΩ‰ª§Ôºå‰∏ªËøõÁ®ãÊâßË°åÂÆåÁªìÊùü‰∫ÜÔºåÂÆπÂô®‰πüÂ∞±ÁªìÊùü‰∫Ü</p>
<blockquote>
<p>dockerfile ÂÜôÊ∏ÖÊ•ö entrypoint Âíå cmdÔºåÂêØÂä®ËÑöÊú¨Â¶ÇÊûúÁ´ãÂàª‰ºöÈÄÄÂá∫ÔºåÈÇ£‰πàÂú®ÊúÄÂêéÊ∑ªÂä† tail -f Êüê‰∏™Êó•ÂøóÊñá‰ª∂„ÄÇÊàñËÄÖ ÁõëÂê¨Êüê‰∏™Á´ØÂè£ÊàñËÄÖËøõÁ®ã„ÄÇ<br>
ÊñπÊ≥ï1: ËÆæÁΩÆÂÆπÂô®ÂêØÂä®Êó∂Â∞±ÂêØÂä®ÊúçÂä°ENTRYPOINT [&ldquo;flask&rdquo;, &ldquo;run&rdquo;, &ldquo;-h&rdquo;, &ldquo;0.0.0.0&rdquo;, &ldquo;-p&rdquo;, &ldquo;80&rdquo;]<br>
ÊñπÊ≥ï2:CMD service apache2 start &amp;&amp; tail -F /var/log/apache2/error.logÂÜçÊûÅÁ´ØÁÇπ sleep infinite</p></blockquote>
<h4 id="Áî®dockerfileÊûÑÂª∫ÈïúÂÉè">Áî®dockerfileÊûÑÂª∫ÈïúÂÉè
</h4><p><code>docker build -t &lt;Êñ∞ÈïúÂÉèÂêçÂ≠ó:Ê†áÁ≠æ&gt; .</code><br>
ÊØîÂ¶Ç<code>docker build -t nodehexo:V5 .</code><br>
ËØ∑‰∏çË¶ÅÂøòËÆ∞ÊúÄÂêé‰∏Ä‰∏™<code>.</code>ÔºåËøôË°®Á§∫Âú®ÂΩìÂâçÁõÆÂΩï‰∏ãÊûÑÂª∫<br>
Áî®ËøôÊù°Êåá‰ª§ÂâçÂÖà<code>CD</code>Âà∞dockerfileÊñá‰ª∂ÊâÄÊîæÁΩÆÁöÑÁõÆÂΩï<br>
ÊØîÂ¶ÇÊàëÂÖà<code>CD ./dockerbuild</code>ÔºåÂõ†‰∏∫ÊàëÁöÑÊñá‰ª∂ÊîæÂú®<code>Áî®Êà∑/dockerbuild</code>ÁõÆÂΩï‰∏ãÈù¢<br>
ÁÑ∂ÂêéÂ∞±Êã•Êúâ‰∫ÜÂ±û‰∫éÊûÑÂª∫ÁöÑÈïúÂÉèÔºÅ</p>
<h4 id="141-entrypoint‰∏écmdÁöÑÂå∫Âà´">1.4.1 ENTRYPOINT‰∏éCMDÁöÑÂå∫Âà´
</h4><p>Docker ÁöÑ ENTRYPOINT Âíå CMD ÂèÇÊï∞Êé¢Áßò<br>
<a class="link" href="https://aws.amazon.com/cn/blogs/china/demystifying-entrypoint-cmd-docker/"  target="_blank" rel="noopener"
    >https://aws.amazon.com/cn/blogs/china/demystifying-entrypoint-cmd-docker/</a></p>
<h4 id="142-dockerfileÊûÑÂª∫ÈïúÂÉèÊó∂Â¶Ç‰ΩïÈÄâÊã©fromÈïúÂÉè‰ª•ÂáèÂ∞èÈïúÂÉè‰ΩìÁßØ">1.4.2 dockerfileÊûÑÂª∫ÈïúÂÉèÊó∂Â¶Ç‰ΩïÈÄâÊã©FROMÈïúÂÉè‰ª•ÂáèÂ∞èÈïúÂÉè‰ΩìÁßØ
</h4><p>busyboxÔºö<br>
<a class="link" href="https://blog.csdn.net/hknaruto/article/details/70229896"  target="_blank" rel="noopener"
    >https://blog.csdn.net/hknaruto/article/details/70229896</a><br>
alpineÔºö<br>
<a class="link" href="https://hub.docker.com/_/alpine"  target="_blank" rel="noopener"
    >https://hub.docker.com/_/alpine</a><br>
alpineÂåÖÁÆ°ÁêÜÂô®APKÔºö<br>
<a class="link" href="https://wangchujiang.com/linux-command/c/apk.html"  target="_blank" rel="noopener"
    >https://wangchujiang.com/linux-command/c/apk.html</a><br>
<a class="link" href="https://wiki.alpinelinux.org/wiki/Alpine_Package_Keeper"  target="_blank" rel="noopener"
    >https://wiki.alpinelinux.org/wiki/Alpine_Package_Keeper</a></p>
<h3 id="15-Â∞ÜÂ∑≤ÊúâÈïúÂÉèÊâìÂåÖÂ∏¶Ëµ∞‰ΩøÁî®Â∞ÜÊâìÂåÖÊù•ÁöÑÈïúÂÉè">1.5 Â∞ÜÂ∑≤ÊúâÈïúÂÉèÊâìÂåÖÂ∏¶Ëµ∞/‰ΩøÁî®Â∞ÜÊâìÂåÖÊù•ÁöÑÈïúÂÉè
</h3><p><a class="link" href="https://zhuanlan.zhihu.com/p/348849578"  target="_blank" rel="noopener"
    >https://zhuanlan.zhihu.com/p/348849578</a></p>
<h4 id="Â∞ÜÈïúÂÉè‰øùÂ≠ò‰∏∫Êú¨Âú∞Êñá‰ª∂">Â∞ÜÈïúÂÉè‰øùÂ≠ò‰∏∫Êú¨Âú∞Êñá‰ª∂
</h4><p>ÂèØ‰ª•‰ΩøÁî®Docker saveÂëΩ‰ª§</p>
<pre><code>docker save -o mssql-2019-with-cimb.tar mssql-2019-with-cimb
</code></pre>
<p>‰ºöÂæóÂà∞‰∏Ä‰∏™<code>mssql-2019-with-cimb.tar</code>Êñá‰ª∂ÔºåÂ∞±ÂèØ‰ª•ÈöèË∫´Êê∫Â∏¶Âï¶</p>
<p>‰ªéÊñá‰ª∂ËΩΩÂÖ•ÈïúÂÉè</p>
<h4 id="‰ªéÊñá‰ª∂ËΩΩÂÖ•ÈïúÂÉè">‰ªéÊñá‰ª∂ËΩΩÂÖ•ÈïúÂÉè
</h4><p>‰ΩøÁî®Docker loadÂëΩ‰ª§:</p>
<pre><code>docker load --input mssql-2019-with-cimb.tar
</code></pre>
<h3 id="16-dockerÊåÇËΩΩÊú¨Âú∞ÁõÆÂΩï">1.6 dockerÊåÇËΩΩÊú¨Âú∞ÁõÆÂΩï
</h3><p>ÊúâÂÖ≥volume:https://docs.docker.com/storage/volumes/<br>
<a class="link" href="https://docs.docker.com/get-started/05_persisting_data/"  target="_blank" rel="noopener"
    >https://docs.docker.com/get-started/05_persisting_data/</a><br>
<a class="link" href="https://blog.csdn.net/zz00008888/article/details/131924286"  target="_blank" rel="noopener"
    >https://blog.csdn.net/zz00008888/article/details/131924286</a></p>
<p>Âú®Docker‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî®‚Äú-v‚ÄùÈÄâÈ°πÊù•ÊåÇËΩΩÊú¨Âú∞ÁõÆÂΩï„ÄÇËØ•ÈÄâÈ°πÈúÄË¶Å‰∏§‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´ÊòØÊú¨Âú∞ÁõÆÂΩïË∑ØÂæÑÂíåÂÆπÂô®ÂÜÖÁõÆÂΩïË∑ØÂæÑ„ÄÇ‰æãÂ¶ÇÔºå‰ª•‰∏ãÂëΩ‰ª§Â∞ÜÊú¨Âú∞ÁõÆÂΩï‚Äú/home/user/app‚ÄùÊåÇËΩΩÂà∞ÂÆπÂô®ÂÜÖÁöÑ‚Äú/app‚ÄùÁõÆÂΩï‰∏≠Ôºö</p>
<pre><code>docker run -v /home/user/app:/app my_image
</code></pre>
<p>ËøôÂ∞Ü‰ΩøÂæóÂÆπÂô®ÂèØ‰ª•ËÆøÈóÆÊú¨Âú∞ÁõÆÂΩï‰∏≠ÁöÑÊñá‰ª∂ÔºåÂπ∂‰∏î‰ªª‰ΩïÂØπËØ•ÁõÆÂΩïÁöÑÊõ¥Êîπ‰πü‰ºöÂèçÊò†Âú®ÂÆπÂô®‰∏≠„ÄÇ</p>
<p><strong>DockerÊåÇËΩΩÊú¨Âú∞ÁõÆÂΩïÂà∞Â∑≤ÊúâÂÆπÂô®</strong></p>
<p>Èô§‰∫ÜÂú®ÂÆπÂô®ÂêØÂä®Êó∂ÊåÇËΩΩÊú¨Âú∞ÁõÆÂΩïÂ§ñÔºåËøòÂèØ‰ª•Âú®ËøêË°åÊó∂Â∞ÜÊú¨Âú∞ÁõÆÂΩïÊåÇËΩΩÂà∞Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®‰∏≠„ÄÇË¶ÅÂÆûÁé∞Ëøô‰∏ÄÁÇπÔºåÂèØ‰ª•‰ΩøÁî®‚Äúdocker cp‚ÄùÂëΩ‰ª§Â∞ÜÊú¨Âú∞ÁõÆÂΩïÂ§çÂà∂Âà∞ÂÆπÂô®‰∏≠ÔºåÂπ∂‰ΩøÁî®‚Äúdocker exec‚ÄùÂëΩ‰ª§Âú®ÂÆπÂô®‰∏≠ÊâßË°åÂëΩ‰ª§„ÄÇ‰æãÂ¶ÇÔºå‰ª•‰∏ãÂëΩ‰ª§Â∞ÜÊú¨Âú∞ÁõÆÂΩï‚Äú/home/user/data‚ÄùÊåÇËΩΩÂà∞Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®‰∏≠Ôºö</p>
<pre><code>docker cp /home/user/data my_container:/data
docker exec -it my_container bash
</code></pre>
<p>Âú®ÂÆπÂô®‰∏≠ÔºåÂèØ‰ª•ËÆøÈóÆÊåÇËΩΩÁöÑÁõÆÂΩï‚Äú/data‚ÄùÔºåÂπ∂‰∏î‰ªª‰ΩïÂØπËØ•ÁõÆÂΩïÁöÑÊõ¥Êîπ‰πü‰ºöÂèçÊò†Âú®Êú¨Âú∞Êñá‰ª∂Á≥ªÁªü‰∏≠„ÄÇ</p>
<h3 id="17-ÂÖ∂‰ªñ‰∏Ä‰∫õÊìç‰Ωú">1.7 ÂÖ∂‰ªñ‰∏Ä‰∫õÊìç‰Ωú
</h3><pre><code># ****************************** ÂÆπÂô® ****************************** #
# Êü•ÁúãÊ≠£Âú®ËøêË°åÁöÑÂÆπÂô®
$ docker ps
# Êü•ÁúãÊâÄÊúâÂÆπÂô®
$ docker ps -a
# ÂêØÂä®/ÂÅúÊ≠¢Êüê‰∏™ÂÆπÂô®
$ docker start/stop id/name
# ‰ª•‰∫§‰∫íÊñπÂºèÂêØÂä®‰∏Ä‰∏™ÂÆπÂô®
$ docker start -i id/name
# ËøõÂÖ•Êüê‰∏™ÂÆπÂô®(‰ΩøÁî®exitÈÄÄÂá∫ÂêéÂÆπÂô®‰πüË∑üÁùÄÂÅúÊ≠¢ËøêË°å)
$ docker attach id/name
# ÂêØÂä®‰∏Ä‰∏™‰º™ÁªàÁ´Ø‰ª•‰∫§‰∫íÂºèÁöÑÊñπÂºèËøõÂÖ•Êüê‰∏™ËøêË°åÁöÑÂÆπÂô®Ôºà‰ΩøÁî®exitÈÄÄÂá∫ÂêéÂÆπÂô®‰∏çÂÅúÊ≠¢ËøêË°åÔºâ
$ docker exec -it id/name
# Âà†Èô§Êüê‰∏™ÂÆπÂô®
$ docker rm id/name
# Â§çÂà∂ubuntuÂÆπÂô®Âπ∂‰∏îÈáçÂëΩÂêç‰∏∫test‰∏îËøêË°åÔºåÁÑ∂Âêé‰ª•‰º™ÁªàÁ´Ø‰∫§‰∫íÂºèÊñπÂºèËøõÂÖ•ÂÆπÂô®ÔºåËøêË°åbash
$ docker run --name test -ti ubuntu /bin/bash

# ****************************** ÈïúÂÉè ****************************** #
# Êü•ÁúãÊú¨Âú∞ÈïúÂÉè
$ docker images
# Âà†Èô§Êüê‰∏™ÈïúÂÉè
$ docker rmi id/name
# Âü∫‰∫éÂΩìÂâçÁõÆÂΩï‰∏ãÁöÑDockerfileÔºåÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫name:flagÁöÑÈïúÂÉè
$ docker build -t name:flag .
</code></pre>
<h2 id="2-Â∑≤ÂêØÂä®ÂÆπÂô®Êìç‰Ωú">2. Â∑≤ÂêØÂä®ÂÆπÂô®Êìç‰Ωú
</h2><h3 id="21-win10‰∏ãdockerÁªôÂ∑≤Â≠òÂú®ÁöÑÂÆπÂô®Ê∑ªÂä†Á´ØÂè£Êò†Â∞ÑÁöÑÊñπÊ≥ï">2.1 win10‰∏ãdockerÁªôÂ∑≤Â≠òÂú®ÁöÑÂÆπÂô®Ê∑ªÂä†Á´ØÂè£Êò†Â∞ÑÁöÑÊñπÊ≥ï
</h3><p>Âçö‰∏ªÂÜçÂêêÊßΩ‰∏Ä‰∏ãÔºåËøô‰∏™Ë∞ÉËØïÈò∂ÊÆµÂ¶ÇÊ≠§Â∏∏Áî®ÁöÑ‰øÆÊîπÂÆπÊàëÁ´ØÂè£ÔºåÊîπËµ∑Êù•Âç¥ÂÉèÊ∏∏Êàè‰ΩúÂºäÔºå‰∏çËßâÂæóËøô‰∏™Ë¶ÅÂÅöÁÆÄÂçïÂæàÈöæÔºåÊÄïÂè™ÊòØÊ≤°ÂÅö<br>
<a class="link" href="https://mdnice.com/writing/25822ca29531424d9b68d7feb8273a82"  target="_blank" rel="noopener"
    >https://mdnice.com/writing/25822ca29531424d9b68d7feb8273a82</a><br>
<a class="link" href="https://blog.csdn.net/Taysuesue/article/details/126706394"  target="_blank" rel="noopener"
    >https://blog.csdn.net/Taysuesue/article/details/126706394</a><br>
<a class="link" href="https://www.cnblogs.com/kingsonfu/p/11578073.html"  target="_blank" rel="noopener"
    >https://www.cnblogs.com/kingsonfu/p/11578073.html</a></p>
<p>Êü•ÁúãÂÆπÂô®Â∑≤Êò†Â∞ÑÁöÑÁ´ØÂè£ÔºàdockerdeskUIÂÜÖ‰πüÂèØÁúãËßÅÔºâ</p>
<pre><code>docker port ÂÆπÂô®ID/ÂÆπÂô®Âêç
</code></pre>
<p>ÂÖàÂÅúÊ≠¢ÂÆπÂô®</p>
<pre><code>docker stop {ÂÆπÂô®ÁöÑÂêçÁß∞ÊàñËÄÖ id }
</code></pre>
<p>Êü•ÁúãÂÆπÂô®ÂÆåÊï¥ÁöÑ <code>hash_of_the_container</code> Êï∞ÂÄºÔºö</p>
<pre><code>docker inspect {ÂÆπÂô®ÁöÑÂêçÁß∞ÊàñËÄÖ id } | grep Id

# ÊØîÂ¶ÇÔºö
docker inspect cbe26510c276 | grep Id
# ‰ºöÂæóÂà∞Â¶Ç‰∏ãÁªìÊûúÔºö
# &quot;Id&quot;: &quot;cbe26510c276fa9a4487a8c2af8cbb49410f2a5305149d2b26eb8ce37c777d00&quot;
</code></pre>
<p><strong>Â¶ÇÊûú‰∏ªÊú∫ÊòØlinuxÔºàmacÂ∫îËØ•‰πüË°åÊ≤°ÊµãÔºâ</strong><br>
ÊâìÂºÄ hostconfig.json ÈÖçÁΩÆÊñá‰ª∂:</p>
<pre><code>vim /var/lib/docker/containers/{hash_of_the_container}/hostconfig.json
</code></pre>
<p>ËÆ∞ÂæóËøòË¶ÅÊîπ config.v2.jsonÔºåÊîπÊ≥ïÂêå‰∏ãÈù¢ÁöÑwin10<br>
<strong>Â¶ÇÊûúÊòØwin10</strong><br>
1.ÂÖàÊâæÂà∞ÂÆπÂô®ÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÈ¶ñÂÖàÊàëÁöÑÁîµËÑëÂú∞ÂùÄÊ†èËæì\wsl$\ËøõÂÖ•Âà∞ÁΩëÁªúÊñá‰ª∂Â§π‰∏ä,Âú®‰∏ÄÊ≠•‰∏ÄÊ≠•ÊâæÂà∞ÂÆπÂô®ÁõÆÂΩï</p>
<pre><code>\\wsl$\docker-desktop-data\data\docker\containers
</code></pre>
<p>2.ÁÇπÂáªËøõÂÖ•Áõ∏Â∫îÂÆπÂô®IDÊñá‰ª∂Â§πÔºåÊâìÂºÄÂêé‰øÆÊîπÂÖ∂‰∏≠ÁöÑ <code>config.v2.json</code> Âíå <code>hostconfig.json</code></p>
<p><strong>hostconfig.json</strong></p>
<pre><code>&quot;PortBindings&quot;:{&quot;22/tcp&quot;:[{&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;50022&quot;}],&quot;3306/tcp&quot;:[{&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;53306&quot;}],&quot;6379/tcp&quot;:[{&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;56379&quot;}]}
</code></pre>
<p>ËøôÈáåÁöÑ<code>HostPort</code>Â≠óÈù¢ÊÑèÊÄùÂ∞±ÊòØÂÆø‰∏ªÊú∫ÁöÑÁ´ØÂè£ÔºåÊâÄ‰ª•Âç≥Ôºö<br>
ÂÆπÂô®ÂÜÖ22&gt;Â§ñÈÉ®5022ËÆøÈóÆ<br>
ÂÆπÂô®ÂÜÖ3306&gt;Â§ñÈÉ®53306ËÆøÈóÆ<br>
ÂÆπÂô®ÂÜÖ6379&gt;Â§ñÈÉ®56379ËÆøÈóÆ</p>
<p><strong>config.v2.json</strong> Êúâ‰∏§Â§ÑÈúÄË¶ÅÊ∑ªÂä†ÔºåÂè™‰øÆÊîπ‰∏ÄÂ§Ñ‰∏çÁîüÊïà</p>
<pre><code>&quot;ExposedPorts&quot;:{&quot;22/tcp&quot;:{},&quot;3306/tcp&quot;:{},&quot;6379/tcp&quot;:{}}
</code></pre>
<pre><code>&quot;Ports&quot;:{&quot;22/tcp&quot;:[{&quot;HostIp&quot;:&quot;0.0.0.0&quot;,&quot;HostPort&quot;:&quot;50022&quot;}],&quot;3306/tcp&quot;:[{&quot;HostIp&quot;:&quot;0.0.0.0&quot;,&quot;HostPort&quot;:&quot;53306&quot;}],&quot;6379/tcp&quot;:[{&quot;HostIp&quot;:&quot;0.0.0.0&quot;,&quot;HostPort&quot;:&quot;56379&quot;}]}
</code></pre>
<p>‰∏çËøáÊàëÂÆûÈôÖÂè™Êîπ‰∫ÜËøôÈáåÁöÑ<code>&quot;ExposedPorts&quot;</code>Ë≤å‰ººÂ∞±Ë°å‰∫Ü</p>
<p>ÁÑ∂ÂêéÈáçÂêØ<strong>docker</strong>ÔºåÊ≥®ÊÑè‰∏çÂè™ÊòØÈáçÂêØÂÆπÂô®ÔºåÊàë‰∏ÄÂºÄÂßãÂè™ÈáçÂêØÂÆπÂô®ÂèëÁé∞ÁôΩÊîπ‰∫Ü</p>
<pre><code># ÈáçÂêØ docker
service docker restart
</code></pre>
<p>ÊàñËÄÖÂú®Á≥ªÁªüÂè≥‰∏ãËßíÔºåÁÇπÂáªRestartÈáçÂêØÊï¥‰∏™ Docker ÊúçÂä°ÔºåÁÑ∂ÂêéÂÜçÈáçÂêØ Container Âç≥ÂèØÊ≠£Â∏∏‰ΩøÁî®</p>
<h3 id="22-dockerÂÆπÂô®ÂÜÖÊúçÂä°ÂºÄÊú∫Ëá™ÂêØÂä®ÂÆûÁé∞ÊñπÊ°à‰ª•sshÊúçÂä°‰∏∫‰æã">2.2 dockerÂÆπÂô®ÂÜÖÊúçÂä°ÂºÄÊú∫Ëá™ÂêØÂä®ÂÆûÁé∞ÊñπÊ°àÔºà‰ª•sshÊúçÂä°‰∏∫‰æãÔºâ
</h3><p><strong><font color=red>Ê≥®ÊÑèÔºå2.2ËøôÊÆµÂÜÖÂÆπÈöèÁùÄÂØπdockerÂíålinux‰∫ÜËß£ÁöÑÊ∑±ÂÖ•ËßâÂæóÊúâ‰∏çÂ¶•Ôºå‰ΩÜÊòØ‰Ωú‰∏∫Â≠¶‰π†ÁöÑËøáÁ®ãËøòÊòØ‰øùÁïô</font></strong></p>
<p><a class="link" href="https://blog.csdn.net/qq_38603541/article/details/124028994"  target="_blank" rel="noopener"
    >https://blog.csdn.net/qq_38603541/article/details/124028994</a></p>
<p>Âõ†‰∏∫ÊàëÂêéÁª≠ÊâìÁÆóÁî®Á±ª‰ººvscodeÈáåÁöÑremote-sshÊù•ÁÆ°ÁêÜÂÆπÂô®ÂÜÖÔºå‰πüÊÉ≥Áî®winscpÁ≠âÂ•ΩÁî®ÁöÑÂ∑•ÂÖ∑ÂèØ‰ª•Êé•ËøõÊù•ÔºåËøòÊòØÊúâÂøÖË¶ÅÂºÄ‰∏™ssh<br>
<strong>Ëß£ÂÜ≥ÊñπÊ°à</strong><br>
1„ÄÅÊ≠£Â∏∏Êàë‰ª¨Âú®linuxÊìç‰ΩúÁ≥ªÁªüÂÜÖËÆæÁΩÆÊúçÂä°Ëá™ÂêØÂä®ÁöÑÊñπÊ≥ï‰∏ÄËà¨ÈÉΩÊòØ‰ΩøÁî®systemctl„ÄÇ</p>
<p>systemctl enable ssh<br>
2„ÄÅ‰ΩÜÊòØÔºå‰∏ÄËà¨Âú®dockerÂÆπÂô®ÂÜÖÊàë‰ª¨‰∏ÄËà¨‰∏çËøô‰πàÂπ≤ÔºåÂõ†‰∏∫ÂÆπÂô®ÂÜÖÊ≤°ÊúâsystemctlÊùÉÈôê‚Ä¶‚Ä¶</p>
<p>3„ÄÅÊàë‰ª¨‰æùÁÑ∂ËøòÊòØ‰ΩøÁî®ËÑöÊú¨ÁöÑÂΩ¢ÂºèÂ∞ÜsshËÆæ‰∏∫Ëá™ÂêØÔºåÂè™‰∏çËøáËøô‰∏™ÁöÑËøô‰∏™ËÑöÊú¨ÂíåÊàë‰ª¨‰ΩøÁî®DockerfileÁöÑËÑöÊú¨‰∏ç‰∏ÄÊ†∑„ÄÇ</p>
<p>4„ÄÅÂú® /root ÁõÆÂΩï‰∏ãÊñ∞Âª∫‰∏Ä‰∏™ start_ssh.shÊñá‰ª∂ÔºåÂπ∂Áªô‰∫àËØ•Êñá‰ª∂ÂèØÊâßË°åÊùÉÈôê„ÄÇ</p>
<pre><code>touch /root/start_ssh.sh
 
vim /root/start_ssh.sh
 
chmod +x /root/start_ssh.sh
</code></pre>
<p>5„ÄÅstart_ssh.sh ËÑöÊú¨ÁöÑÂÜÖÂÆπÔºåÂ¶Ç‰∏ãÔºö</p>
<pre><code>#!/bin/bash
 
LOGTIME=$(date &quot;+%Y-%m-%d %H:%M:%S&quot;)
echo &quot;[$LOGTIME] startup run...&quot; &gt;&gt;/root/start_ssh.log
service ssh start &gt;&gt;/root/start_ssh.log
#service mysql start &gt;&gt;/root/star_mysql.log   //ÂÖ∂‰ªñÊúçÂä°‰πüÂèØËøô‰πàÂÆûÁé∞
</code></pre>
<p>6„ÄÅÂ∞Üstart_ssh.shËÑöÊú¨Ê∑ªÂä†Âà∞ÂêØÂä®Êñá‰ª∂‰∏≠</p>
<pre><code>vim /root/.bashrc
</code></pre>
<p>7„ÄÅÂú® .bashrc Êñá‰ª∂Êú´Â∞æÂä†ÂÖ•Â¶Ç‰∏ãÂÜÖÂÆπÔºö</p>
<pre><code># startup run
if [ -f /root/start_ssh.sh ]; then
      . /root/start_ssh.sh
fi
</code></pre>
<p>8„ÄÅ‰øùÂ≠òÂêéÔºåÁ≠â‰∏ãÊ¨°ÈáçÂêØÂÆπÂô®ÁöÑÊó∂ÂÄôÔºåÊ∑ªÂä†ÁöÑÊúçÂä°‰πüÂ∞±Ë∑üÁùÄÈáçÂêØ‰∫Ü„ÄÇ</p>
<p>dockerÂÆπÂô®Âú®ÂêØÂä®ÁöÑÊó∂ÂÄôÔºå‰ºöËá™Âä®ÊâßË°åÁöÑÊòØ~/.bashrcÊñá‰ª∂ÔºåÊâÄ‰ª•ÔºåÁéØÂ¢ÉÂèòÈáèÈúÄË¶ÅÈÖçÁΩÆÂú®ËØ•Êñá‰ª∂ÂÜÖÔºåËøôÊ†∑ÈïúÂÉèÂêØÂä®Êó∂ÔºåÂèØËá™Âä®ÊâßË°åËØ•Êñá‰ª∂Ôºå‰ΩøÁéØÂ¢ÉÂèòÈáèÁîüÊïà„ÄÇ</p>
<p><strong><font color=red>Ê≠£Á°ÆÁöÑÁêÜËß£ÊòØÔºö</font></strong><br>
/root/.bashrc‰ºöÂú®ÂÆπÂô®ÂêØÂä®ÁöÑÊó∂ÂÄôËá™Âä®ÊâßË°åËøôÂè•ÂçÅÂàÜÊ¨†Â¶•Ôºå<br>
ÂáÜÁ°ÆÁöÑÊù•ËÆ≤ÊòØ<strong>rootÁî®Êà∑ÁôªÂΩïbashÁöÑÊó∂ÂÄô‰ºöÊâßË°åÔºåÊØèÊ¨°ÂºÄÊñ∞ÁöÑbash shell‰πü‰ºöÊâßË°å‰∏ÄÈÅç</strong><br>
Â¶ÇÊûúdockerfileÂÜÖÂÆö‰πâ‰∫ÜENTRYPOINTÊàñËÄÖCMDÊâßË°åÁ±ª‰ººÔºö</p>
<pre><code>ENTRYPOINT [ &quot;/bin/bash&quot;,&quot;-c&quot;,&quot;service apache2 start&quot; ]
</code></pre>
<p>ÈÇ£‰πàÂØπ‰∫éÂÆπÂô®Êù•ËØ¥PID 1Âè∑ËøõÁ®ãÂ∞±ÊòØbashÔºàapacheÊòØbashÁöÑÂ≠êËøõÁ®ãÔºâÔºå‰πüÁ°ÆÂÆû‰ºöË∑ë‰∏ÄÈÅç.bashrcÂÜÖÁöÑÂÜÖÂÆπÔºå‰ΩÜÊòØËøô‰∏ç‰ª£Ë°®ÊâÄÊúâÂÆπÂô®ÂêØÂä®Êó∂‰∏ÄÂÆö‰ºöÂêØÂä®bash shellÔºå‰πüÂèØËÉΩÁõ¥Êé•ÊòØ‰∏™javaËøõÁ®ãÔºå‰πüÂèØËÉΩÊòØdumb-intÔºåÊõ¥Â§öÊó∂ÂÄôÂèØËÉΩÊòØsh shellÔºåËøôÂ∫îËØ•ÈÉΩ‰∏ç‰ºöËß¶Âèë.bashrc<br>
ÊâÄ‰ª•Â¶ÇÊûúÊÉ≥Ë¶ÅÂú®ÂÆπÂô®ÂêØÂä®Êó∂Ëá™Âä®ÂêØÂä®‰∏Ä‰∏™ÊúçÂä°ÔºåÊé®ËçêÂÜôÂú®dockerfileÈáåÔºåÊØîÂ¶Ç</p>
<pre><code>COPY start.sh /
ENTRYPOINT [ &quot;sh&quot;,&quot;/start.sh&quot; ]
</code></pre>
<p>ÁÑ∂ÂêéÂÜçÂú®start.shÈáåÂÜô‰∏ä‰Ω†ÈúÄË¶ÅÂêØÂä®ÁöÑÊúçÂä°</p>
<pre><code>#!/bin/sh
service ssh restart
service apache2 restart
</code></pre>
<p>‰ª•ÂèäÂ¶ÇÊûúÁ°ÆÂÆûÊúâÂæàÂ§ö‰∏™ÊúçÂä°ÈúÄË¶ÅÂêØÔºåËÄÉËôë‰ΩøÁî®Á±ª‰ººdocker composeÂêØÂ§ö‰∏™ÈïúÂÉèÔºåÊØè‰∏™ÈïúÂÉèË∑ëÂçï‰∏™ÊúçÂä°</p>
<h4 id="221-ÊãìÂ±ïbashrc-etcbashrc-etcprofile‰∏â‰∏™Êñá‰ª∂ÁöÑÂå∫Âà´">2.2.1 ÊãìÂ±ïÔºö~/.bashrc /etc/bashrc /etc/profile‰∏â‰∏™Êñá‰ª∂ÁöÑÂå∫Âà´
</h4><p><a class="link" href="https://segmentfault.com/q/1010000003793341"  target="_blank" rel="noopener"
    >https://segmentfault.com/q/1010000003793341</a></p>
<h2 id="3-ÊâìÂåÖÂà∂‰ΩúËá™Â∑±ÁöÑdockerÈïúÂÉèdockerfile">3 ÊâìÂåÖÂà∂‰ΩúËá™Â∑±ÁöÑdockerÈïúÂÉè(dockerfile)
</h2><p>dockerfileÊòØÂëäËØâdocker engineÂ¶Ç‰ΩïÊûÑÂª∫ÈïúÂÉèÁöÑËÑöÊú¨</p>
<h3 id="31-nodejsgithexoÈïúÂÉè">3.1 node.js+git+hexoÈïúÂÉè
</h3><p>ÂÖ∂ÂÆûËøôÈÉ®ÂàÜÈïúÂÉèÂÅö‰∫Ü‰∏§ÈÅçÔºåÁ¨¨‰∏ÄÈÅçÁõ¥Êé•ÊãâÁöÑÂÆòÊñπnodeÈïúÂÉèÔºåÁÑ∂ÂêéÂèëÁé∞ssh‰∏çÂ•ΩË£ÖÔºåËµ∞‰∫ÜÂæàÂ§öÂºØË∑ØÔºåÈöèÁùÄÂØπdocker‰∫ÜËß£ÁöÑÂä†Ê∑±ÔºåÊúÄÂêéÊàëËá™Â∑±ÂÅö‰∫ÜdockerfileÈáçÊûÑ‰∫ÜËøôÈÉ®ÂàÜÈïúÂÉè</p>
<h4 id="311-dockerfile">3.1.1 Dockerfile
</h4><p><strong><i class="fas fa-file"></i>dockerfileV02ÔºàÂèØ‰ª•Ê≤°ÊúâÂêéÁºÄÔºâ</strong></p>
<pre><code>#Ëøô‰∏™ÂåÖÂ∞ÜÂåÖÂê´Ôºönode-v29.5.0  git ssh hexo
#hexoÁéØÂ¢ÉÁõÆÂΩï/hexo/Winblog
FROM debian:stable-slim
LABEL maintainer=&quot;winotmk&quot; web=&quot;md.winotmk.com&quot; Ver=&quot;02&quot;
#ADDÊúâËá™Âä®Ëß£ÂéãÂäüËÉΩ
ADD node-v20.5.0-linux-x64.tar.xz /
    #ÁßªÂä®node‰∫åËøõÂà∂Êñá‰ª∂Âà∞ÁõÆÂΩï
RUN mkdir -p /usr/local/nodejs &amp;&amp;\
    mv node-v20.5.0-linux-x64 /usr/local/nodejs &amp;&amp;\
    #mk hexoÁõÆÂΩï
    mkdir -p /hexo/Winblog &amp;&amp;\
    apt-get update &amp;&amp;\
    #ÂÆâË£ÖSSH ÂÆâË£ÖGIT
    apt-get install -y --no-install-recommends openssh-server git-core &amp;&amp;\
    apt-get autoremove -y &amp;&amp;\
    apt-get clean
#nodeÂíånpmÁéØÂ¢ÉÂèòÈáè
ENV PATH=&quot;/usr/local/nodejs/node-v20.5.0-linux-x64/bin:$PATH&quot;
#ÂÆâË£Öhexo
WORKDIR /hexo/Winblog
RUN npm install -g hexo-cli
#hexoÁéØÂ¢ÉÂèòÈáè
ENV PATH=&quot;$PATH:/hexo/Winblog/node_modules/.bin&quot;
#Êõ¥Êñ∞sshËÆæÁΩÆ
COPY sshd_config /etc/ssh/
#ÁéØÂ¢ÉÂèòÈáèËÆæÁΩÆ
COPY .profile /root/
#ËÆæÁΩÆÂêØÂä®ËÑöÊú¨
COPY hexo_debian_service_start.sh /service_start.sh
CMD [&quot;/bin/bash&quot;,&quot;/service_start.sh&quot;]
</code></pre>
<p>Âü∫Êú¨‰∏äÈÉΩÊòØ‰∫õÂÆâË£ÖÂëΩ‰ª§‰ª•ÂèäÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè<br>
ÂÆâË£Ö‰∫Ü<code>hexo</code>,<code>git</code>,<code>ssh</code>,<code>node</code><br>
ËøôÊòØ‰ºòÂåñËøá‰∫ÜÁöÑÁ¨¨‰∫åÁâàÔºå‰∏ªË¶ÅÊòØÁ¨¨‰∫åÁâà‰ΩøÁî®‰∫Ü<code>ADD</code>ÔºåÂÆÉÂü∫Êú¨Âíå<code>COPY</code>‰∏ÄÊ†∑ÔºåÈÉΩÂèØ‰ª•ÊääÊüê‰∏™ÊûÑÂª∫ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÊâìÂÖ•Ê≠£Âú®ÁîüÊàêÁöÑÈïúÂÉèÈáåÔºå‰ΩÜÂΩìÁî®ADDÂú®ÊâßË°å &lt;Ê∫êÊñá‰ª∂&gt; ‰∏∫ tar ÂéãÁº©Êñá‰ª∂ÁöÑËØùÔºåÂéãÁº©Ê†ºÂºè‰∏∫ gzip, bzip2 ‰ª•Âèä xz ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºöËá™Âä®Â§çÂà∂Âπ∂Ëß£ÂéãÂà∞ &lt;ÁõÆÊ†áË∑ØÂæÑ&gt;„ÄÇËØ¥ÁôΩ‰∫ÜADD‰ºöÂ∏ÆÊàëËá™Âä®Ëß£Âéã<br>
Âú®ËøôÈáåÊàëËøòËÆæÁΩÆ‰∫ÜsshÔºà‰ΩÜÊòØÊ≤°ÊúâÈÖçÁΩÆrootÂØÜÁ†ÅÔºâ</p>
<p>ËÄåÊàëÁöÑÁ¨¨‰∏ÄÁâàÂºÄÂ§¥Ôºö<br>
<strong><i class="fas fa-file"></i>dockerfileV01</strong></p>
<pre><code>FROM debian:stable-slim

COPY node-v20.5.0-linux-x64.tar.xz /node-v20.5.0-linux-x64.tar.xz
RUN apt-get update &amp;&amp;\
    apt-get install -y xz-utils --no-install-recommends &amp;&amp;\
    tar -xvf node-v20.5.0-linux-x64.tar.xz &amp;&amp;\
    mkdir -p /usr/local/nodejs &amp;&amp;\
    mv node-v20.5.0-linux-x64 /usr/local/nodejs &amp;&amp;\
    #Âà†Èô§xzÂåÖ
    apt-get purge -y xz-utils &amp;&amp; \
    apt-get autoremove -y &amp;&amp; \
    apt-get clean &amp;&amp; \
    #Âà†Èô§node-v20.5.0-linux-x64.tar.xzÂåÖ
    rm node-v20.5.0-linux-x64.tar.xz

#nodeÂíånpmÁéØÂ¢ÉÂèòÈáè
ENV PATH=&quot;/usr/local/nodejs/node-v20.5.0-linux-x64/bin:$PATH&quot;
</code></pre>
<p>ÂΩìÊó∂‰∏çÁü•ÈÅì<code>ADD</code>ÁöÑÂäüËÉΩÔºå‰ΩøÁî® <code>COPY</code>Êã∑Ë¥ùÊï¥‰∏™.tar.xzÂåÖÁªìÊûúdebianËøòÊ≤°Êúâ.xzÂåÖËß£ÂéãÂäüËÉΩÔºåÈúÄË¶ÅÂÆâË£Ö<code>xz-utils</code><a class="link" href="https://blog.csdn.net/weixin_43502175/article/details/129547250"  target="_blank" rel="noopener"
    >ËØ¶ËßÅ</a>ÔºåÂá≠Á©∫Â§öÂá∫Â•ΩÂá†Ë°å</p>
<p><strong>‰∏∫‰ªÄ‰πàË¶ÅÁî®‰∫åËøõÂà∂ÂåÖÂÆâË£ÖÂë¢node.jsÂë¢Ôºü</strong><br>
Âõ†‰∏∫ÂÆûÊµãÂ¶ÇÊûúÁî®<code>apt-get install nodejs</code>ÂÆâË£ÖÔºå<br>
ÊàñËÄÖ<code>curl -fsSL https://deb.nodesource.com/setup_19.x | bash - &amp;&amp;\ apt-get install -y nodejs</code><a class="link" href="https://github.com/nodesource/distributions"  target="_blank" rel="noopener"
    >ÂëΩ‰ª§Âá∫Â§Ñ</a>Ôºå<br>
ÂÆâË£ÖÂá∫Êù•ÈïúÂÉè‰ΩìÁßØÂ∞±ÊòØ‰ºöÊ•ûÂ§ßÂá∫Â•ΩÂá†ÁôæMB</p>
<h4 id="312-nodejsgithexoÈïúÂÉècopyÁöÑÊñá‰ª∂">3.1.2 node.js+git+hexoÈïúÂÉèCOPYÁöÑÊñá‰ª∂
</h4><p><strong><i class="fas fa-file"></i>.profile</strong></p>
<pre><code># ~/.profile: executed by Bourne-compatible login shells.

if [ &quot;$BASH&quot; ]; then
  if [ -f ~/.bashrc ]; then
    . ~/.bashrc
  fi
fi

mesg n 2&gt; /dev/null || true

export PATH=&quot;/usr/local/nodejs/node-v20.5.0-linux-x64/bin:$PATH&quot;
export PATH=&quot;$PATH:/hexo/Winblog/node_modules/.bin&quot;
</code></pre>
<p>‰∏∫‰∫ÜÈò≤Ê≠¢ÈïúÂÉè‰∏ä‰∫ëÂêéËé´ÂêçÂÖ∂Â¶ôÁöÑÂéüÂõ†ÂØºËá¥ÁéØÂ¢ÉÂèòÈáèÂá∫ÈóÆÈ¢òÔºåËÑöÊú¨ÈáåÂÜçË∑ë‰∏ÄÈÅçÔºåËøô‰ø©<code>export PATH</code>ÂÖ∂ÂÆûdockerfileÈáåËÆæÁΩÆËøá</p>
<p><strong>sshd_configÊòØ‰ªÄ‰πà</strong><br>
sshÁöÑËÆæÁΩÆ<br>
ÂèÇËÄÉÔºöhttps://blog.csdn.net/weixin_34910922/article/details/125193597<br>
‰∏ªË¶ÅÊîπ‰∫Ü‰∏§Êù°</p>
<pre><code class="language-bash">#vim /etc/ssh/sshd_config
PermitRootLogin yes #rootÁôªÈôÜÊùÉÈôê
PasswordAuthentication yes #ÂØÜÁ†ÅÊùÉÈôê
</code></pre>
<p>Á≠â‰∫éÊàë‰ª¨È¢ÑÂÖàÊîπÂ•Ω‰∫ÜÈÖçÁΩÆÊñá‰ª∂ÔºåÂú®ÊûÑÂª∫ÁöÑÊó∂ÂÄôÂÜçÊääÈÖçÁΩÆÊîæÂÖ•ÂÆπÂô®ÈáåÈù¢</p>
<p><strong><i class="fas fa-file"></i>hexo_debian_service_start.sh</strong></p>
<pre><code>#!/bin/bash
. ~/.profile
LOGTIME=$(date &quot;+%Y-%m-%d %H:%M:%S&quot;)
echo &quot;[$LOGTIME] startup run...&quot; &gt;&gt;/start_ssh.log
service ssh start &gt;&gt;/start_ssh.log
tail -f /start_ssh.log
</code></pre>
<p>ÂêØÂä®ËÑöÊú¨Ôºå‰∏ªË¶ÅÂêØÂä®‰∫ÜsshÊúçÂä°ÔºåÂπ∂‰∏îÁî®<code>tail -f</code>ËÆ©Ëøô‰∏™ÂÆπÂô®‰∏ÄÁõ¥ËøêË°å‰ª•Êñπ‰æøÊàë‰ª¨Êù•ËøûÊé•</p>
<h4 id="313-ÂºÄÂßãÊûÑÂª∫ÈïúÂÉè">3.1.3 ÂºÄÂßãÊûÑÂª∫ÈïúÂÉè
</h4><p>ÂÖà<code>CD</code>Âà∞DockerfileÊâÄÂú®ÁöÑÁõÆÂΩï<br>
<img src="/images/20230829135356.png"
	
	
	
	loading="lazy"
	
	
></p>
<pre><code>docker build -t hexo_debian:V02 -f dockerfileV02 .
</code></pre>
<p>Ê†ºÂºèÊòØ</p>
<pre><code>docker build -t ÈïúÂÉèÂêç:tag -f DockerfileÊñá‰ª∂Âêç .
</code></pre>
<p>Ê≥®ÊÑè<code>.</code>‰∏çË¶ÅËêΩ‰∏ãÔºÅ</p>
<p>ËøôÊ†∑Êàë‰ª¨ÁöÑÈïúÂÉèÂ∞±ÂÅöÂ•Ω‰∫ÜÔºÅ</p>
<p>Êú¨ËäÇÂèÇËÄÉËµÑÊñôÔºö<br>
‰∫åËøõÂà∂ÊâãÂä®ÂÆâË£ÖnodeÂèÇËÄÉÔºö<br>
<a class="link" href="https://github.com/nodejs/help/wiki/Installation"  target="_blank" rel="noopener"
    >https://github.com/nodejs/help/wiki/Installation</a><br>
<a class="link" href="https://blog.51cto.com/u_13460811/4901015"  target="_blank" rel="noopener"
    >https://blog.51cto.com/u_13460811/4901015</a></p>
<p>‰∏Ä‰∫õÂÖ≥‰∫édockerfileÊåá‰ª§ÁöÑËØ¥ÊòéÔºö<br>
ËæÉËØ¶ÁªÜÔºö <a class="link" href="https://yeasy.gitbook.io/docker_practice/image/dockerfile/copy"  target="_blank" rel="noopener"
    >https://yeasy.gitbook.io/docker_practice/image/dockerfile/copy</a><br>
<a class="link" href="https://blog.csdn.net/qq_35528657/article/details/127244194"  target="_blank" rel="noopener"
    >https://blog.csdn.net/qq_35528657/article/details/127244194</a><br>
<a class="link" href="https://www.runoob.com/docker/docker-dockerfile.html"  target="_blank" rel="noopener"
    >https://www.runoob.com/docker/docker-dockerfile.html</a></p>
<p>Âú®dockerfileÈáåÁî®apt-getÂåÖÁÆ°ÁêÜÁöÑÂª∫ËÆÆÔºö<br>
<a class="link" href="https://ubuntu.com/blog/we-reduced-our-docker-images-by-60-with-no-install-recommends"  target="_blank" rel="noopener"
    >https://ubuntu.com/blog/we-reduced-our-docker-images-by-60-with-no-install-recommends</a><br>
<a class="link" href="https://www.metricfire.com/blog/how-to-build-optimal-docker-images/"  target="_blank" rel="noopener"
    >https://www.metricfire.com/blog/how-to-build-optimal-docker-images/</a></p>
<p>hexoÊâÄÈúÄÁéØÂ¢ÉÂÆâË£ÖËØ¥ÊòéÔºö<br>
<a class="link" href="https://hexo.io/zh-cn/docs/index.html"  target="_blank" rel="noopener"
    >https://hexo.io/zh-cn/docs/index.html</a></p>
<h4 id="314-ÊµãËØïÈïúÂÉèÂäüËÉΩ">3.1.4 ÊµãËØïÈïúÂÉèÂäüËÉΩ
</h4><p>Êù•ÂêØ‰∏™ÂÆπÂô®ËØïËØïÔºÅ</p>
<pre><code>docker run -it -d -p 22:22 --name hexo_debian hexo_debian:V02
</code></pre>
<p>ËøôÈáåÂºÄÊîæ‰∫Ü22Á´ØÂè£Êù•Êñπ‰æøÈ™åËØÅsshÊúçÂä°ÂíåÁôªÂΩïsshÊ≤°ÊúâÈóÆÈ¢ò<br>
ÂêØÂä®ÊàêÂäüÔºÅ<br>
ÂÆπÂô®ÂÜÖÊâßË°åÊù•È™åËØÅÊúçÂä°Áä∂ÊÄÅÈÉΩÊ≠£Â∏∏Ôºö</p>
<pre><code>ssh
node -v
git -v
</code></pre>
<p>ËæìÂá∫Ôºö<br>
<img src="/images/20230829124045.png"
	
	
	
	loading="lazy"
	
	
><br>
ÂèØ‰ª•ÁúãËßÅ‰∏ÄÂàáÊ≠£Â∏∏ÔºÅ</p>
<h4 id="315-ËÆæÁΩÆÂíåÂÜçÊâìÂåÖÈïúÂÉè">3.1.5 ËÆæÁΩÆÂíåÂÜçÊâìÂåÖÈïúÂÉè
</h4><h5 id="ËÆæÁΩÆ">ËÆæÁΩÆ
</h5><p>ÊØïÁ´üËá™Áî®ÈïúÂÉèÔºåÊàë‰π†ÊÉØÁõ¥Êé•ÊääÊØîÂ¶ÇsshÂØÜÈí•‰πãÁ±ªÂÖ®ÈÉΩÈÖçÁΩÆÂ•ΩÔºåÂÜç<code>commit</code>‰∏∫‰∏Ä‰∏™Êñ∞ÈïúÂÉèÔºå‰ª•ÂêéÂ∞±ÂÜç‰πü‰∏çÁî®ËæìÂØÜÁ†Å‰∫ÜÔºåËøôÊ†∑Á°ÆÂÆû‰∏çÂÆâÂÖ®Ôºå‰ΩÜÊòØËá™Â∑±ÁöÑhexoÂçöÂÆ¢ËÄåÂ∑≤Ôºå‰ΩïÂøÖ‰∏∫ÈöæËá™Â∑±Âë¢<br>
Êé•‰∏ãÊù•ËÆæÁΩÆrootÂØÜÁ†ÅÂíåÈáçÂêØsshÊúçÂä°<br>
<img src="/images/20230829124114.png"
	
	
	
	loading="lazy"
	
	
></p>
<pre><code>passwd root
#ÁÑ∂ÂêéÊï≤Ëá™Â∑±ËÆæÁΩÆÁöÑÂØÜÁ†Å
service ssh restart
</code></pre>
<p>Â∞ùËØï‰ΩøÁî®PuTTYËøõË°åSSH <a class="link" href="mailto:root@127.0.0.1" >root@127.0.0.1</a>ÁôªÂΩïÔºö<br>
<img src="/images/20230829123658.png"
	
	
	
	loading="lazy"
	
	
><br>
ÊàêÂäü!!!<br>
Êé•‰∏ãÊù•ÈÖçÁΩÆgitÂíåsshÔºåË¶ÅÁîüÊàêÊñ∞ÁöÑsshÂÖ¨Èí•<br>
ËØ¶ËßÅÔºöhttps://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent<br>
<img src="/images/20230829124332.png"
	
	
	
	loading="lazy"
	
	
></p>
<pre><code>ssh-keygen -t ed25519 -C &quot;githubÈÇÆÁÆ±@qq.com&quot;
</code></pre>
<p>ÂæóÂà∞ÂØÜÈí•ÈªòËÆ§Âú®<code>/root/.ssh/id_ed25519.pub</code><br>
<img src="/images/20230829124753.png"
	
	
	
	loading="lazy"
	
	
><br>
Âú®GithubÁöÑÂ§¥ÂÉèÁÇπSettingÁÑ∂ÂêéÁÇπÂè≥‰∏äËßíÂáª<strong>New SSH key</strong>ÔºåÊääid_ed25519.pubÂÜÖÂÆπÁ≤òË¥¥ËøõÂç≥ÂèØÔºÅ<br>
ÊµãËØïSSHËøûÊé•Ôºö</p>
<pre><code>ssh -T git@github.com
</code></pre>
<p><img src="/images/20230829125208.png"
	
	
	
	loading="lazy"
	
	
><br>
ËøôÊ†∑Â∞±Ëøû‰∏ä‰∫ÜÔºÅ<br>
ÈúÄË¶ÅËøõË°å‰∏Ä‰∏™Â∞èËÆæÁΩÆÔºö</p>
<pre><code>git config --global user.email &quot;you@example.com&quot;
</code></pre>
<p>ËøôÊ†∑‰ª•Âêé‰ΩøÁî®<code>hexo d</code>ÁöÑÊó∂ÂÄôÂ∞±ËÉΩÊó†ËÑëÈÉ®ÁΩ≤‰∫Ü</p>
<h5 id="ÂÜçÊâìÂåÖ">ÂÜçÊâìÂåÖ
</h5><p>‰∏∫‰∫ÜÂ≠ò‰∏ãÊàë‰ª¨ÈÖçÁΩÆÂ•ΩÁöÑËøûÊé•ÔºåÂà∂‰ΩúÊàêÊúÄÁªàÈïúÂÉèÊñπ‰æøeci‰∫ë‰∏äË∞ÉÁî®ÔºåÊääÁé∞ÊúâÂÆπÂô®ÂÜçcommit‰∏ÄÊ¨°</p>
<pre><code>docker commit hexo_debian hexo_debian:V02-configured
</code></pre>
<p>Êàê‰∫ÜÔºÅÂæóÂà∞‰∫Ü<code>hexo_debian:V02-configured</code>‰Ωú‰∏∫ÊàëÊúÄÂêéÂáÜÂ§á‰∏ä‰º†Ëá≥ECI‰∫ëÁöÑÈïúÂÉè</p>
<hr>
<h4 id="316-ÈôÑ‰∏Ä‰∫õÂëΩ‰ª§ÂèÇËÄÉ">3.1.6 ÈôÑ‰∏Ä‰∫õÂëΩ‰ª§ÂèÇËÄÉ
</h4><h5 id="Â¶Ç‰ΩïÁî®sshËøûÊé•-docker-ÂÆπÂô®">Â¶Ç‰ΩïÁî®sshËøûÊé• docker ÂÆπÂô®
</h5><p><a class="link" href="https://blog.csdn.net/weixin_34910922/article/details/125193597"  target="_blank" rel="noopener"
    >https://blog.csdn.net/weixin_34910922/article/details/125193597</a></p>
<p>1.‰øÆÊîπrootÂØÜÁ†Å</p>
<pre><code>$ passwd root
ËæìÂÖ•ÂØÜÁ†ÅÔºö123456(Ëá™Â∑±ÂÜ≥ÂÆö)
</code></pre>
<p>2.ÂÆâË£ÖOpenssh</p>
<pre><code>sudo apt-get update # Êõ¥Êñ∞Ê∫ê
sudo apt-get upgrade # Êõ¥Êñ∞Á≥ªÁªüËΩØ‰ª∂
apt-get install -y openssh-server
</code></pre>
<p>3.‰øÆÊîπsshÈÖçÁΩÆ,ÂÖÅËÆ∏rootÁôªÂΩï<br>
<a class="link" href="https://blog.csdn.net/weixin_43343144/article/details/102494830"  target="_blank" rel="noopener"
    >https://blog.csdn.net/weixin_43343144/article/details/102494830</a><br>
<strong>„ÄêÈùûÂ∏∏ÈáçË¶Å„ÄëÂú®/etc/ssh/ssh_config‰∏≠Ê≤°ÊúâPermitRootLogin yesÈÄâÈ°πÁöÑËØùÔºåÂ∞±Ë¶ÅÂú®sshd_configÊñá‰ª∂‰∏≠ÂØªÊâæÔºÅ</strong></p>
<pre><code>vim /etc/ssh/sshd_config
PermitRootLogin yes #rootÁôªÈôÜÊùÉÈôê
PasswordAuthentication yes #ÂØÜÁ†ÅÊùÉÈôê
</code></pre>
<p>4.ÂêØÂä®sshÊúçÂä°/ÈáçÂêØÊúçÂä°</p>
<pre><code>service ssh start
service ssh restart
</code></pre>
<h5 id="ÂÆâË£Öhexo">ÂÆâË£Öhexo
</h5><pre><code>npm install hexo-cli -g
</code></pre>
<h5 id="sshËøúÁ®ãÁôªÂΩïËøô‰∏™ÈïúÂÉè">SSHËøúÁ®ãÁôªÂΩïËøô‰∏™ÈïúÂÉè
</h5><p>‰πãÂâçÂú®Êú¨Êú∫dockerÂÜÖÂ∑≤ÁªèÈÖçÂ•Ω‰∫ÜsshÊúçÂä°ÔºåËÆ≤ÈÅìÁêÜÂ∫îËØ•ÂêØÂä®ÂàôÂºÄÂêØssh‰ΩÜÊòØ‰∏çÁü•‰∏∫Âï•Ê≤°ÊúâËá™Âä®ÂêØÂä®Ôºå‰ª•ÂêéÂÜçÁ†îÁ©∂Âêß<br>
ÊâìÂºÄWorkbenchËøúÁ®ãËøûÊé•ÔºåÂêØÂä®ssh<br>
Áî±‰∫éÊàëÂêØÁî®ECIÊó∂ÂºÄÈÄö‰∫ÜÂºπÊÄßÂÖ¨ÁΩëIPÔºåÊâÄ‰ª•ÊàëÂèØ‰ª•ÈÄöËøáËøô‰∏™IP:22Áî®sshÊù•ÁôªÂΩï<br>
<img src="/images/20230811153438.png"
	
	
	
	loading="lazy"
	
	
><br>
‰ΩøÁî®PuTTYÂ∑•ÂÖ∑ÁôªÂΩïÊàêÂäüÔºÅÔºÅ<br>
<img src="/images/20230811153400.png"
	
	
	
	loading="lazy"
	
	
><br>
Â§ö‰πà‰ª§‰∫∫ÊåØÂ•ãÁöÑ‰∏ÄÂàª</p>
<hr>
<h3 id="32-vsftpdÈïúÂÉè">3.2 vsftpdÈïúÂÉè
</h3><p>Ëøô‰∏™ÈïúÂÉèÊØîËæÉÁÆÄÂçïÔºåÂè™Ë∑ëftpÊúçÂä°Ôºå‰∏ªË¶ÅÂú®ÂÜô‰ΩúÁöÑÊó∂ÂÄôÊñπ‰æø‰∏ä‰º†ÂõæÁâá</p>
<h4 id="321-dockerfile">3.2.1 Dockerfile
</h4><p><strong><i class="fas fa-file"></i>vsftpd_dockerfileV01</strong></p>
<pre><code>#Ëøô‰∏™ÂåÖÂ∞ÜÂåÖÂê´ÔºövsftpÔºàrootÁôªÂΩïÔºâ
FROM debian:stable-slim
LABEL maintainer=&quot;winotmk&quot; web=&quot;md.winotmk.com&quot; Ver=&quot;01&quot;
RUN apt-get update &amp;&amp;\
    apt-get install -y vsftpd --no-install-recommends &amp;&amp;\
    apt-get autoremove -y &amp;&amp;\
    apt-get clean &amp;&amp;\
    echo &quot;root:yourpasswd&quot; | chpasswd
COPY ftpusers /etc/
COPY vsftpd.conf /etc/
COPY service_start.sh /service_start.sh
CMD [&quot;/bin/bash&quot;,&quot;/service_start.sh&quot;]
</code></pre>
<p>ÊØîËæÉÁÆÄÂçïÁöÑdockerfileÔºåÂ∞±Ë£Ö‰∫Ü‰∏™vsftpdÊúçÂä°ÔºåÁÑ∂ÂêéÊã∑Ë¥ù‰∫Ü‰∏Ä‰∫õËÆæÁΩÆÊñá‰ª∂<br>
Â¶ÇÊûúË¶ÅÂú®dockerfileÈáåÈÖçÁΩÆÁî®Êà∑ÂØÜÁ†ÅÂèØ‰ª•Ëøô‰πàÂÜôÔºö</p>
<pre><code>echo &quot;root:yourpasswd&quot; | chpasswd
</code></pre>
<h4 id="322-vsftpdÈïúÂÉècopyÁöÑÊñá‰ª∂">3.2.2 vsftpdÈïúÂÉèCOPYÁöÑÊñá‰ª∂
</h4><p><strong><i class="fas fa-file"></i>service_start.sh</strong></p>
<pre><code>#!/bin/bash
LOGTIME=$(date &quot;+%Y-%m-%d %H:%M:%S&quot;)
echo &quot;[$LOGTIME] startup run...&quot; &gt;&gt;/start_vsftpd.log
service vsftpd start &gt;&gt;/start_vsftpd.log
tail -f /start_vsftpd.log
</code></pre>
<p>ÁÆÄÂçïÁöÑÊúçÂä°ÂêØÂä®ËÑöÊú¨Ôºå‰ΩøÁî®<code>tail -f</code>Êù•Áª¥ÊåÅ‰ΩèËøõÁ®ã</p>
<p><strong><i class="fas fa-file"></i>ftpusers</strong><br>
<code>root</code>ÂâçÂä†‰∏™<code>#</code>‰ª•ÂêØÁî®rootÁôªÂΩï</p>
<pre><code># /etc/ftpusers: list of users disallowed FTP access. See ftpusers(5).

#root
daemon
bin
sys
sync
games
man
lp
mail
news
uucp
nobody
</code></pre>
<p><strong><i class="fas fa-file"></i>vsftpd.conf</strong><br>
ftpËÆæÁΩÆÊñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂ÂÜÖÂÆπÂæàÂ§öÂè™‰∫õ‰∏ã‰øÆÊîπÁöÑÈÉ®ÂàÜ</p>
<pre><code>listen=NO
listen_ipv6=YES
anonymous_enable=NO
local_enable=YES
write_enable=YES
dirmessage_enable=YES
use_localtime=YES
connect_from_port_20=YES
pam_service_name=vsftpd
utf8_filesystem=YES
</code></pre>
<p>*ÂÖ≥‰∫é‰øÆÊîπvsftpdÁöÑÁ´ØÂè£<br>
<a class="link" href="https://askubuntu.com/questions/37058/how-to-change-vsftpd-default-port"  target="_blank" rel="noopener"
    >https://askubuntu.com/questions/37058/how-to-change-vsftpd-default-port</a><br>
<code>vsftpd.conf</code>ÈáåÁöÑËÆæÁΩÆ‰∏çÊòØÂÆåÂÖ®ËÆæÁΩÆÔºåÂèØ‰ª•Ëá™Â∑±Â¢ûÂä†Â≠óÊÆµ</p>
<pre><code>listen_port=234
ftp_data_port=235
pasv_min_port=30000
pasv_max_port=31000
</code></pre>
<p>Êù•ËÆæÁΩÆÁ´ØÂè£<br>
Ê≥®ÊÑèFTPÈªòËÆ§20‰º†ËæìÊï∞ÊçÆÔºå21Áî®Êù•listenÔºåÊâÄ‰ª•ÊîπÂæóËØùÂπ≤ËÑÜ‰∏§‰∏™ÈÉΩÊîπÂêß</p>
<p>*ËøôÈáåÈÅáÂà∞Ëøá‰∏Ä‰∏™Â∞èÂùëÂùë<br>
<img src="/images/20230829155702.png"
	
	
	
	loading="lazy"
	
	
><br>
ÊûÑÂª∫Âô®Êä•ÈîôÔºå‰∏ÄÁõ¥Âç°Âú®<code>Starting FTP server: vsftpdvsftpd failed - probably invalid config. ... (warning).</code><br>
<img src="/images/20230829155358.png"
	
	
	
	loading="lazy"
	
	
><br>
Ëá™Â∑±Âú®ÂÆπÂô®ÂÜÖËøêË°å<code>service vsftpd start</code>ÁöÑÊó∂ÂÄôÂêåÊ†∑Â¶ÇÊ≠§Ôºå‰∏ÄËà¨ËøôÊ†∑ÊòØÂõ†‰∏∫<code>vsftpd.conf</code>Êñá‰ª∂ËÆæÁΩÆÈîô‰∫ÜÔºåÂèØÁ•ûÂ•áÁöÑÊòØÊàëÂè™Ë¶ÅÊâìÂºÄdockerDesktopÁöÑFilesÊñá‰ª∂ÁÆ°ÁêÜÊää<code>vsftpd.conf</code>ÊâìÂºÄÂÜç‰øùÂ≠ò‰∏Ä‰∏ãÂ∞±ÂèØ‰ª•ÊàêÂäüËøêË°å<code>service vsftpd start</code><br>
ÊàëÂèëÁé∞Ëøô‰∏™Êñá‰ª∂ÁöÑÊ†ºÂºèÊòØUTF-8 CRLF<br>
<img src="/images/20230829155602.png"
	
	
	
	loading="lazy"
	
	
><br>
‰øÆÊîπ‰∏∫LF<br>
<img src="/images/20230829155623.png"
	
	
	
	loading="lazy"
	
	
><br>
Âç≥ÂèØÈ°∫Âà©ÂêØÂä®vsftpdÊúçÂä°</p>
<p>ÂèÇËÄÉÔºö<br>
<a class="link" href="https://www.cnblogs.com/Dreamcho/p/10805690.html"  target="_blank" rel="noopener"
    >https://www.cnblogs.com/Dreamcho/p/10805690.html</a></p>
<p>Â¶ÇÊûúË¶ÅÂú®dockerfileÈáåÂä†Áî®Êà∑Ôºö<br>
<a class="link" href="https://blog.csdn.net/u010275850/article/details/120587850"  target="_blank" rel="noopener"
    >https://blog.csdn.net/u010275850/article/details/120587850</a></p>
<h3 id="33-ddnsÈïúÂÉè">3.3 ddnsÈïúÂÉè
</h3><p>Ëøô‰∏™ÈïúÂÉèÊõ¥ÁÆÄÂçïÔºüÂè™Âú®ÂêØÂä®ÁöÑÊó∂ÂÄôË∑ë‰∏Ä‰∏™ddns<br>
‰ΩÜÊòØÊàëÂç¥Âú®ËøôÈáåÂç°‰∫ÜÂæà‰πÖ<br>
ÂéüÂõ†‰πã‰∏ÄÊòØÂõ†‰∏∫‰∏ÄÂºÄÂßãÈÄâÁî®ÁöÑddnsËΩØ‰ª∂Êú¨Âú∞Ë∑ëÂæóÂ•ΩÂ•ΩÁöÑÔºåÂú®ÈòøÈáå‰∫ë‰∏äÊÄªÊòØÊä•ÈîôÔºålogÊòæÁ§∫Â∑≤Áªè‰øÆÊîπ‰∫ÜaËÆ∞ÂΩï‰ΩÜÊòØËá™Â∑±Âéª‰∏ÄÁúãÂï•‰πüÊ≤°ÊúâÔºåÂæàÊòØÂõ∞ÊÉëÔºåÊâÄ‰ª•Êç¢‰∫Ü‰∏™ËΩØ‰ª∂ÂÆûÁé∞<br>
ÊúÄÂºÄÂßã‰ΩøÁî®ÁöÑÊòØËøô‰∏™ËΩØ‰ª∂ÔºåÈÖçÁΩÆÊñπ‰æø<br>
<a class="link" href="https://github.com/NewFuture/DDNS"  target="_blank" rel="noopener"
    >https://github.com/NewFuture/DDNS</a><br>
ÂèÇËÄÉÔºö<br>
<a class="link" href="https://blog.csdn.net/biao0309/article/details/117202951"  target="_blank" rel="noopener"
    >https://blog.csdn.net/biao0309/article/details/117202951</a><br>
Êó†Â•àÈòøÈáå‰∫ë‰∏äÂç≥‰æøÊòØÁî®ÂÆòÊñπÊèê‰æõÁöÑÈïúÂÉè<code>newfuture/ddns</code>‰πü‰ºöÊä•ÈîôÔºàÊÅº</p>
<p>ÊâÄ‰ª•ÊàëÊîπÁî®ddns-go:<br>
<a class="link" href="https://github.com/jeessy2/ddns-go"  target="_blank" rel="noopener"
    >https://github.com/jeessy2/ddns-go</a><br>
ÂÖàË¥¥‰∏äÂÆòÊñπÈïúÂÉèÁöÑÂ±ÇÔºö<br>
<strong>jeessy/ddns-go</strong><br>
<img src="/images/20230904184205.png"
	
	
	
	loading="lazy"
	
	
><br>
Êàë‰ª¨ÁöÑÊñ∞ÈïúÂÉèÂ∞ÜÂü∫‰∫éÂÆòÊñπÈïúÂÉèÊù•ÂÅö</p>
<h4 id="331-dockerfile">3.3.1 dockerfile
</h4><p><strong><i class="fas fa-file"></i>ddns-go_dockerfileV01</strong></p>
<pre><code>FROM jeessy/ddns-go
LABEL maintainer=&quot;winotmk&quot; web=&quot;md.winotmk.com&quot; Ver=&quot;01&quot;
COPY ddns_start.sh /
COPY ddns_go_config.yaml /
ENV DDNS_URL=
ENTRYPOINT [ &quot;sh&quot;,&quot;/ddns_start.sh&quot; ]
CMD [ &quot;&quot; ]
</code></pre>
<p>ËøôÈáåÂÅö‰∫Ü‰∏Ä‰∏™ÂèòÈáè<code>$DDNS_URL</code>Êù•ÂÆö‰πâÊàëÊÉ≥Ë¶ÅdnsÁöÑÂüüÂêç(ÂΩìÁÑ∂Ëøô‰∏™ÂüüÂêçÊàëÂæóÊã•Êúâ)<br>
ENTRYPOINTÂíåCMDÁöÑËÆæÁΩÆ‰ºöË¶ÜÁõñÊéâÁöÑ‰πãÂâçÈïúÂÉèÂÜÖÁöÑËÆæÁΩÆ<br>
Êàë‰∏çÁ°ÆÂÆöCMD [ &quot;&quot; ]ÊòØÂê¶ÊúâÂøÖË¶ÅÔºå‰ΩÜÊÄª‰πãÊàëÊÉ≥‰ΩøÂÆòÊñπÈïúÂÉèÈáåÁöÑCMDÂ§±ÊïàÔºå‰ªéÁªìÊûú‰∏äÊù•ÁúãÁÆ°Áî®</p>
<h4 id="332-ddnsÈïúÂÉècopyÁöÑÊñá‰ª∂">3.3.2 ddnsÈïúÂÉèCOPYÁöÑÊñá‰ª∂
</h4><p><strong><i class="fas fa-file"></i>ddns_go_config.yaml</strong></p>
<pre><code>dnsconf:
    - ipv4:
        enable: true
        gettype: url
        url: https://myip4.ipip.net,https://ddns.oray.com/checkip,https://ip.3322.net,https://4.ipw.cn
        netinterface: &quot;&quot;
        cmd: &quot;&quot;
        domains:
            - null.winotmk.com
      ipv6:
        enable: false
        gettype: netInterface
        url: https://speed.neu6.edu.cn/getIP.php,https://v6.ident.me,https://6.ipw.cn
        netinterface: &quot;&quot;
        cmd: &quot;&quot;
        ipv6reg: &quot;&quot;
        domains:
            - &quot;&quot;
      dns:
        name: alidns
        id: ÈòøÈáå‰∫ëÁöÑAccessKey ID
        secret: ÈòøÈáå‰∫ëÁöÑAccessKey secret
      ttl: &quot;&quot;
user:
    username: &quot;&quot;
    password: &quot;&quot;
webhook:
    webhookurl: &quot;&quot;
    webhookrequestbody: &quot;&quot;
    webhookheaders: &quot;&quot;
notallowwanaccess: true
</code></pre>
<p>Ëøô‰∏™ÊòØddns-goÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÁ¨¨‰∏ÄÊ¨°ÂêØÂä®‰ºöÂú®Êú¨Âú∞:9876ÊâìÂºÄ‰∏™webÁïåÈù¢Ôºå‰øùÂ≠òËÆæÁΩÆÂêé‰ºöÂú®root‰∏≠ÁîüÊàêËøô‰∏™Êñá‰ª∂ÔºåËøôÈáåÊàëÁõ¥Êé•ÂºïÂÖ•Ëøô‰∏™Êñá‰ª∂ÊòØÂ∏åÊúõÂêéÈù¢ËÉΩÁî®<code>sed</code>ÂëΩ‰ª§ÂØπÊñá‰ª∂ÁöÑ<code>domains</code>Â≠óÊÆµËøõË°å‰øÆÊîπ</p>
<p><strong><i class="fas fa-file"></i>ddns_start.sh</strong></p>
<pre><code>#!/bin/sh
LOGTIME=$(date &quot;+%Y-%m-%d %H:%M:%S&quot;)
echo &quot;[$LOGTIME] startup run...&quot; &gt;&gt;/start_ddns.log
cd /
if [ &quot;$DDNS_URL&quot; = &quot;&quot; ]  
then  
    echo &quot;DDNS_URL is not set!&quot; &gt;&gt;/start_ddns.log 
    tail -f /start_ddns.log 
else    
    sed -i &quot;s/null.winotmk.com/$DDNS_URL/g&quot; ddns_go_config.yaml
    #chmod 777 ddns_go_config.yaml
    sleep 3
    /app/ddns-go -l :9876 -f 300 -c /ddns_go_config.yaml
    echo &quot;Â∑≤ÊâßË°åÊõ¥Êñ∞[$DDNS_URL]Ëß£Êûê&quot; &gt;&gt;/start_ddns.log
    tail -f /start_ddns.log
fi
</code></pre>
<p>Âú®Ëøô‰∏™ËÑöÊú¨Èáå‰ºöÂà§Êñ≠<code>$DDNS_URL</code>ÊòØÂê¶‰∏∫Á©∫ÔºåÁ©∫ÁöÑËØùÁõ¥Êé•ËæìÂá∫ÈúÄË¶Å<code>$DDNS_URL</code>ËÆæÁΩÆ<br>
Â¶ÇÊûú‰∏ç‰∏∫Á©∫ÁöÑËØù‰ºöÈÄöËøá<code>sed</code>ÊõøÊç¢Â≠óÁ¨¶ÔºåËøôÈáåËÆæÁΩÆÊñá‰ª∂ÂÜÖÈªòËÆ§ÂÜôÂæóÊòØ<code>null.winotmk.com</code><br>
Áî®ËøôÁßçÊñπÂºèÂéªÁõ¥Êé•‰øÆÊîπËÆæÁΩÆÊñá‰ª∂ÔºåÊòØÂõ†‰∏∫ÊàëÊ≤°ÊâæÂà∞Ëøô‰∏™ËΩØ‰ª∂ÊòØÂê¶ËÉΩÁõ¥Êé•Áî®ÁéØÂ¢ÉÂèòÈáèÊù•ÂÆö‰πâËß£ÊûêÂà∞ÁöÑÂüüÂêç</p>
<p>ÂÖ≥‰∫éÁî®sedÊõøÊç¢congif.jsonËÆæÁΩÆÂÜÖÁöÑÂ≠óÊÆµÔºö<br>
Â¶Ç‰Ωï‰ΩøÁî®sed:<br>
<a class="link" href="https://linux.cn/article-11367-1.html"  target="_blank" rel="noopener"
    >https://linux.cn/article-11367-1.html</a><br>
Â¶Ç‰ΩïÂú®sedÂëΩ‰ª§ÂÜÖ‰ΩøÁî®ÂèòÈáè<br>
<a class="link" href="https://www.cnblogs.com/muahao/p/6874412.html"  target="_blank" rel="noopener"
    >https://www.cnblogs.com/muahao/p/6874412.html</a><br>
Âà§Êñ≠ÂèòÈáèÊòØÂê¶‰∏∫Á©∫ÁöÑÊñπÊ≥ïÔºö<br>
<a class="link" href="https://cloud.tencent.com/developer/article/1721905"  target="_blank" rel="noopener"
    >https://cloud.tencent.com/developer/article/1721905</a></p>
<h2 id="4-dockerÈïúÂÉèÊâìÂåÖÂπ∂‰∏ä‰º†Âà∞ÈòøÈáå‰∫ëÈïúÂÉèÂ∫ìark">4 dockerÈïúÂÉèÊâìÂåÖÂπ∂‰∏ä‰º†Âà∞ÈòøÈáå‰∫ëÈïúÂÉèÂ∫ìARK
</h2><p>Â∞ÜËá™Â∑±ÁöÑÈïúÂÉè‰∏ä‰º†Ëá≥ÈòøÈáå‰∫ëÔºö<br>
ÈòøÈáå‰∫ëÊèê‰æõÂÆπÂô®ÈïúÂÉèÊúçÂä°ÔºåÊàëËá™Â∑±Áé©ÂºÄÈÄö‰∏™‰∫∫ÂÆû‰æãÂç≥ÂèØ<br>
<a class="link" href="https://cr.console.aliyun.com/cn-shanghai/instances"  target="_blank" rel="noopener"
    >https://cr.console.aliyun.com/cn-shanghai/instances</a></p>
<p><img src="/images/20230811150239.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Âª∫Á´ã‰∏Ä‰∏™Ëá™Â∑±ÁöÑ‰ªìÂ∫ìÔºåÁÑ∂ÂêéÂ∞±ËÉΩÁúãÂà∞Á§∫‰æãËØ¥ÊòéÔºåÊàë‰ª¨Â∞±ËÉΩÊääËá™Â∑±ÁöÑÈïúÂÉè‰∏ä‰º†‰∫Ü</p>
<h3 id="41-Â∞ÜÈïúÂÉèÊé®ÈÄÅÂà∞registry">4.1 Â∞ÜÈïúÂÉèÊé®ÈÄÅÂà∞Registry
</h3><pre><code>$ docker login --username=*****@qq.com registry.cn-shanghai.aliyuncs.com
$ docker tag [ImageId] registry.cn-shanghai.aliyuncs.com/******:[ÈïúÂÉèÁâàÊú¨Âè∑]
$ docker push registry.cn-shanghai.aliyuncs.com/******:[ÈïúÂÉèÁâàÊú¨Âè∑]
</code></pre>
<p><code>tag</code>ÊòØÁ±ª‰ººÂ§çÂà∂‰∏Ä‰ªΩ‰∏îÈáçÂëΩÂêçÈïúÂÉèÔºå<code>push</code>ÊòØ‰∏ä‰º†Ôºà‰∏çÁü•ÈÅì‰∏∫‰ªÄ‰πàË¶ÅÈáçÂëΩÂêç</p>
<p>ÈíàÂØπ‰∏äÈù¢ÁöÑ3‰∏™ÈïúÂÉèÔºåÂàÜÂà´ÊòØÔºö<code>node.js+git+hexo</code>,<code>vsftpd</code>,<code>ddns-go</code><br>
ÊàëÂàÜÂà´tagÊàê‰∫ÜÔºö</p>
<pre><code>registry-vpc.cn-shanghai.aliyuncs.com/******:debian_V02_configured #Â∫îËØ•ÂÜôÊàê:hexo_debian_V02_configuredÁöÑÔºåÊºè‰∫Ü„ÄÇ„ÄÇÁÆó‰∫Ü
registry-vpc.cn-shanghai.aliyuncs.com/******:vsftpd_debian_V01
registry-vpc.cn-shanghai.aliyuncs.com/******:ddns_go_V01
</code></pre>
<p>ÂÜçÂàÜÂà´<code>push</code>Âç≥ÂèØ</p>
<h3 id="42-Âú®ÈòøÈáå‰∫ë‰∏ä‰ΩøÁî®ÂÆπÂô®ÂÆû‰æãeciËøêË°åÈïúÂÉè">4.2 Âú®ÈòøÈáå‰∫ë‰∏ä‰ΩøÁî®ÂÆπÂô®ÂÆû‰æãÔºàECIÔºâËøêË°åÈïúÂÉè
</h3><p>ÈòøÈáå‰∫ëECIÊèê‰æõËøô‰∏™ÊúçÂä°Ôºå‰Ω†ÂèØ‰ª•Áõ¥Êé•Áî®Áé∞ÊúâÁöÑÈïúÂÉè‰πüÂèØ‰ª•Ëá™Â∑±‰∏ä‰º†ÔºàÂ∞±ÊòØ‰∏ä‰∏ÄÊ≠•ÈïúÂÉèÊúçÂä°Èáå‰∏ä‰º†ÁöÑÈïúÂÉèÔºâÊåâÁßíÊî∂Ë¥πÔºÅ‰∏çËøá‰Ωú‰∏∫hexoËøôÁßçÂêØÁî®&gt;ÁîüÊàê&gt;ÈÉ®ÁΩ≤&gt;ÂÖ≥Èó≠ÁöÑÊúçÂä°Êù•ËØ¥ÔºåËä±‰∏ç‰∫ÜÂá†ÊØõÈí±</p>
<p><img src="/images/20230811151948.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ÁÑ∂ÂêéÂ∞±ËÉΩÁúãÂà∞Êàë‰ª¨‰∏ä‰º†ÁöÑÈïúÂÉè<br>
<img src="/images/20230811152250.png"
	
	
	
	loading="lazy"
	
	
></p>
<h2 id="5-eciÂÆπÂô®ÂàõÂª∫Ê®°ÊùøÂíåeciÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑‰ΩøÁî®">5 eciÂÆπÂô®ÂàõÂª∫Ê®°ÊùøÂíåeciÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑‰ΩøÁî®
</h2><p>ÂèÇËÄÉÊñáÁ´†Ëøô‰∏§ÁØáË∂≥Â§ü:<br>
<a class="link" href="https://github.com/aliyuneci/eci-client-doc/blob/main/eci_run.md"  target="_blank" rel="noopener"
    >https://github.com/aliyuneci/eci-client-doc/blob/main/eci_run.md</a><br>
<a class="link" href="https://help.aliyun.com/document_detail/186961.html"  target="_blank" rel="noopener"
    >https://help.aliyun.com/document_detail/186961.html</a></p>
<h3 id="51-eciÁÆÄ‰ªã">5.1 eciÁÆÄ‰ªã
</h3><p><a class="link" href="https://www.aliyun.com/product/eci"  target="_blank" rel="noopener"
    >https://www.aliyun.com/product/eci</a><br>
ECIÊòØ Serverless ÂíåÂÆπÂô®ÂåñÁöÑÂºπÊÄßËÆ°ÁÆóÊúçÂä°„ÄÇÊÇ®Êó†ÈúÄÁÆ°ÁêÜÂ∫ïÂ±Ç ECS ÊúçÂä°Âô®ÔºåÂè™ÈúÄË¶ÅÊèê‰æõÊâìÂåÖÂ•ΩÁöÑÈïúÂÉèÔºåÂç≥ÂèØËøêË°åÂÆπÂô®Ôºå‰∏éÈòøÈáå‰∫ëÂÆπÂô®ÊúçÂä°Êó†ÁºùÂØπÊé•Âπ∂‰ªÖ‰∏∫ÂÆπÂô®ÂÆûÈôÖËøêË°åÊ∂àËÄóÁöÑËµÑÊ∫ê‰ªòË¥π„ÄÇ</p>
<p>Âçö‰∏ªÔºöÊØîECS‰∫ëÊúçÂä°Âô®ÁÅµÊ¥ªÂæóÂ§öÔºåÊú¨Âú∞Áî®dockerÂà∂‰ΩúÂ•ΩÈïúÂÉè‰ª•ÂêéÔºå‰∏ä‰º†ÔºåÈöèÂêØÈöèÁî®ÔºåÁî®ÂÆåÂ∞±ÈáäÊîæÔºåÊàêÊú¨ÂèØ‰ª•Âæà‰Ωé,‰ΩÜÂ¶ÇÊûúËøûÂºÄ‰∏Ä‰∏™ÊúàÔºåÂπ∂‰∏ç‰ºöÊØîECSÂàíÁÆóÔºåËØ¶ËßÅÊú¨Á´ô<a class="link" href="https://winotmk.github.io/Docker01.1_%E4%BB%B7%E6%A0%BC%E8%AE%A1%E7%AE%97%E8%A1%A8/"  target="_blank" rel="noopener"
    >ECI‰ª∑Ê†ºËÆ°ÁÆóÈôÑË°®</a></p>
<h3 id="52-Áî®Ê®°ÊùøÂàõÂª∫eci">5.2 Áî®Ê®°ÊùøÂàõÂª∫eci
</h3><p><img src="/images/20230907171351.png"
	
	
	
	loading="lazy"
	
	
><br>
ËØ¢ÈóÆËøáÈòøÈáå‰∫ëÂÆ¢ÊúçÔºåËØ¥Âú®webÊéßÂà∂Èù¢ÁâàÈáåÁöÑËøô‰∏™ÂäüËÉΩÂ∑≤Áªè‰∏ãÁ∫ø‰∫Ü<br>
‰∏çËøáÊ≤°ÂÖ≥Á≥ªÔºåÊàë‰ª¨ËøòÊúâÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºÅ<br>
ÂÆâË£ÖÔºö</p>
<pre><code>sudo bash -c &quot;$(curl -s https://eci-docs.oss-cn-beijing.aliyuncs.com/eci-client/1.0/install.sh)&quot;
</code></pre>
<p>ÁÑ∂ÂêéÈÖçÁΩÆ‰Ω†ÁöÑÈòøÈáå‰∫ë‰ø°ÊÅØ</p>
<pre><code>eci config set-context \
--access-key-id **** \
--access-secret **** \
--region-id cn-shanghai \
--security-group-id sg-**** \
--v-switch-id vsw-****
</code></pre>
<p>Ë¶ÅÊåáÂÆöËá™Â∑±ÁöÑ<code>access-key-id</code>Âíå<code>access-secret</code>ÔºåÂú∞Âå∫‰ª•ÂèäÂÆâÂÖ®ÁªÑÂíåËôöÊãü‰∫§Êç¢Êú∫<br>
Âª∫ËÆÆËøô‰∫õ‰∏úË•øÂú®web‰∏äÁöÑÊéßÂà∂Âè∞ÈáåÂáÜÂ§áÂ•ΩÔºå‰ºöÁõ¥ËßÇÂæàÂ§ö</p>
<p>ÁÑ∂ÂêéÂ∞±ÂèØ‰ª•Áõ¥Êé•ÂàõÂª∫‰∏Ä‰∏™ÂÆπÂô®‰∫Ü</p>
<pre><code>eci run -n myeci centos:7 sleep 3600
</code></pre>
<p>Êåá‰ª§ÂæàÂÉè<code>docker run</code>ÂñùÔºÅÂæàÂ•ΩÔºåÂæàÊúâÁ≤æÁ•û</p>
<p>Êàë‰ª¨ËøòÂèØ‰ª•ÁºñÂÜôyamlÊ®°ÊùøÊñá‰ª∂<br>
ÁÑ∂ÂêéÊâßË°å</p>
<pre><code>eci run -f eci.yaml -w 20
</code></pre>
<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑ‰∫ãÔºåÂ¶ÇÊûú‰ΩøÁî®‰∫Ü<code>-f xxxx.yaml</code>Ê®°ÊùøÊñá‰ª∂ÔºåÈô§‰∫Ü-fÂíå-wÈÄâÈ°π‰ª•Â§ñÔºåÂÖ∂‰ªñÈÄâÈ°πÈÉΩÂ∞ÜË¢´ÂøΩÁï•ÔºåÂõ†‰∏∫Ëøô‰∫õÈÄâÈ°πÈÉΩÊòØÈíàÂØπÂÆû‰æã‰∏≠Êüê‰∏™ÂÆπÂô®ÁöÑÔºåÂ¶ÇÊûúÊ®°Êùø‰∏≠ÂÆö‰πâ‰∫ÜÂ§ö‰∏™ÂÆπÂô®ÔºåECIÂ∞Ü‰∏çÁü•ÈÅìËøô‰∫õÈÄâÈ°πÂ∫îËØ•‰ΩúÁî®‰∫éÂì™‰∏™ÂÆπÂô®<br>
ÈÇ£‰πàÊàëËá™Â∑±ÁöÑÂêØÂä®Ê®°ÊùøÊòØËøôÊ†∑ÁöÑÔºö<br>
<strong><i class="fas fa-file"></i>hexo_debian_eci.yaml</strong></p>
<pre><code>ContainerGroupName: eci-hexo
Cpu: &quot;0.5&quot;
Memory: &quot;1&quot;
Container:
- Name: hexo
  Image: registry-vpc.cn-shanghai.aliyuncs.com/****:debian_V02_configured
  Command: [&quot;/bin/bash&quot;,&quot;/service_start.sh&quot;]
  ImagePullPolicy: IfNotPresent
  Cpu: &quot;0.5&quot;
  Memory: &quot;1&quot;
  VolumeMount:
  - Name: hexo
    MountPath: /hexo
    ReadOnly: false
- Name: vsftpd
  Image: registry-vpc.cn-shanghai.aliyuncs.com/****:vsftpd_debian_V01
  Command: [&quot;/bin/bash&quot;,&quot;/service_start.sh&quot;]
  ImagePullPolicy: IfNotPresent
  VolumeMount:
  - Name: hexo
    MountPath: /hexo
    ReadOnly: false
- Name: ddns
  Image: registry-vpc.cn-shanghai.aliyuncs.com/****:ddns_go_V01
  ImagePullPolicy: IfNotPresent
  EnvironmentVar:
  - FieldRefFieldPath: &quot;&quot;
    Key: DDNS_URL
    Value: mdwrite.winotmk.com
Volume:
- Name: hexo
  Type: NFSVolume
  NFSVolume:
    Server: ****.cn-shanghai.nas.aliyuncs.com
    Path: /
    ReadOnly: false
</code></pre>
<p>ÊòØ‰∏çÊòØÊå∫ÂÉè<code>docker compose</code>~</p>
<p>cpuÂè™Áªô‰∫Ü0.5,Memory 1GÔºåË∂≥Â§ü‰∫ÜÔºå‰πãÂâçËøôÂ•óÂèØÊòØÂú®Ê†ëËéìÊ¥æ3B‰∏äË∑ëÂæóÊ∫úÊ∫úÂæóÂë¢<br>
ÂØπ‰∫éÈòøÈáå‰∫ëECIÔºåCPUÂíåMemoryÁõ¥Êé•ÂíåÊàêÊú¨ÊåÇÈí©ÔºåËÉΩÂ∞ëÂ∞±Â∞ëÂêß</p>
<p>ËøôÈáåÂêØ‰∫Ü‰∏äÈù¢ÂÅöÂ•ΩÁöÑ3‰∏™ÈïúÂÉèÔºåÂàÜÂà´ÂÆûÁé∞hexoÔºåftpÔºåËøòÊúâddns<br>
<code>Command:</code>ÂÜôÊ≥ïÁõÆÊµãÁ±ª‰ººdockerfileÈáåÁöÑ<code>CMD</code>ÔºåÊàë‰π†ÊÉØÂÅöÂ•ΩÂêØÂä®shËÑöÊú¨Â∞±ÊòØ‰∏∫‰∫ÜÊñπ‰æøËøôÈáåÂÜçË∞ÉÁî®<br>
ÊúÄÂêé‰∏ÄÊÆµÂ£∞Êòé‰∫ÜÊàëÁöÑ‰∏Ä‰∏™ÈòøÈáå‰∫ëNASÂç∑ÔºåÂç∑ÈáåÁöÑÂÜÖÂÆπÂ∞±ÊòØÊàëÁöÑhexoÁõÆÂΩï<br>
<img src="/images/20230829142501.png"
	
	
	
	loading="lazy"
	
	
><br>
ÁÑ∂ÂêéÊääÂÆÉÊåÇÂà∞hexoÂíåftpÈïúÂÉè‰∏äÂ∞±Â•Ω‰∫Ü</p>
<p>ÂÄºÂæó‰∏ÄÊèêÁöÑÊòØddnsÈïúÂÉèËøòÂÜô‰∫Ü‰∏™ÁéØÂ¢ÉÂèòÈáè<code>DDNS_URL</code>ÂÄº‰∏∫<code>mdwrite.winotmk.com</code>ÔºåËøô‰ºö‰øÆÊîπ<code>ddns-go</code>ÁöÑËß£ÊûêÈÖçÁΩÆ</p>
<p>ÁÑ∂ÂêéÊâßË°å</p>
<pre><code>eci run -f hexo_debian_eci.yaml -w 20
</code></pre>
<p>‰∏çÂá∫ÊÑèÂ§ñÁöÑËØù‰ºöËøîÂõû‰∏Ä‰∏™eciÁöÑidÁºñÂè∑ÔºåÊâìÂºÄweb‰ºöÂèëÁé∞Â∑≤ÁªèÂàõÂª∫ÊàêÂäü‰∫ÜÔºÅ<br>
<img src="/images/20230907174209.png"
	
	
	
	loading="lazy"
	
	
></p>
<h2 id="6-hexoÊú¨Âú∞ÁºñËæëÁéØÂ¢ÉËÆæÁΩÆÂ¶Ç‰ΩïÁî®vscodeËàíÊúçÁöÑÂÜômdÊñáÊ°£">6 hexoÊú¨Âú∞ÁºñËæëÁéØÂ¢ÉËÆæÁΩÆ‚Äî‚Äî‚Äî‚ÄîÂ¶Ç‰ΩïÁî®VSCodeËàíÊúçÁöÑÂÜôMDÊñáÊ°£
</h2><h3 id="61-vscodessh-fsÊèí‰ª∂ÈÖçÁΩÆ">6.1 VSCodeSSH FSÊèí‰ª∂ÈÖçÁΩÆ
</h3><p><img src="/images/20230908113634.png"
	
	
	
	loading="lazy"
	
	
><br>
ÁÆÄÂçïÈÖçÁΩÆ‰∏Ä‰∏ãÊúçÂä°Âô®Âú∞ÂùÄÂíåÁî®Êà∑ÂØÜÁ†ÅÂ∞±ÂèØ‰ª•ÊääËøúÁ®ãÁõÆÂΩïÊò†Â∞ÑÂà∞Â∑•‰ΩúÂå∫ÈáåÔºåÂæàÊñπ‰æø<br>
<img src="/images/20230908113824.png"
	
	
	
	loading="lazy"
	
	
><br>
ËøôÈáåÂèØ‰ª•ÁúãÂà∞<code>/root/hexo/Winblog</code>ÁõÆÂΩï‰∏ãÊòØÊàëÊåÇËΩΩÁöÑÈòøÈáå‰∫ëNASÁΩëÁõò‰∫Ü</p>
<h3 id="62-markdown-pasteÊèí‰ª∂ÈÖçÁΩÆ">6.2 Markdown PasteÊèí‰ª∂ÈÖçÁΩÆ
</h3><p>‰∏Ä‰∏™ÂæàÊñπ‰æøÁöÑÂú®VScodeÈáåÁõ¥Êé•Á≤òÂõæÁöÑÊèí‰ª∂</p>
<h4 id="ÈÖçÁΩÆ">ÈÖçÁΩÆÔºö
</h4><p><img src="/images/20230908114845.png"
	
	
	
	loading="lazy"
	
	
><br>
‰ºöÁî®Êó∂Èó¥Êù•ÂëΩÂêçÂõæÁâá<br>
ÁÑ∂Âêé‰ºöÂ∞ÜÂõæÁâáÊîæÂÖ•MDÊñá‰ª∂ÁõÆÂΩï‰∏ãÁöÑ<code>images</code>‰∏ã</p>
<p><img src="/images/20230908115038.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ÁÑ∂ÂêéÊñá‰ª∂„ÄãÈ¶ñÈÄâÈ°π„ÄãÈîÆÁõòÂø´Êç∑ÊñπÂºè<br>
<img src="/images/20230908115303.png"
	
	
	
	loading="lazy"
	
	
><br>
ÊàëÂ∞ÜÂø´Êç∑ÈîÆËÆæÁΩÆ‰∏∫<code>ctrl+alt+a</code><br>
ÈÖçÁΩÆÂÆåÊàêÔºÅ</p>
<h4 id="‰ΩøÁî®">‰ΩøÁî®Ôºö
</h4><p>Êà™ÂõæÊàë‰π†ÊÉØÁî®SinpasteÔºåÊåâF1Â∞±ËÉΩÊà™Âõæ<br>
<img src="/images/20230908115743.png"
	
	
	
	loading="lazy"
	
	
><br>
ÁÑ∂ÂêéÁÇπÂè≥‰∏ãËßíÂ§çÂà∂ÊåâÈíÆ<br>
Âú®VScodeÁöÑmarkdownÊñáÊ°£Èáå<code>ctrl+alt+a</code>Â∞±ËÉΩÁ≤òÂõæ‰∫ÜÔºÅ<br>
<img src="/images/20230908113947.png"
	
	
	
	loading="lazy"
	
	
><br>
ÂõæÁâáÊñá‰ª∂‰ºöËá™Âä®‰øùÂ≠ò!</p>
<h3 id="62-vscodeÁöÑsftpÊèí‰ª∂ÈÖçÁΩÆ">6.2 VSCodeÁöÑSFTPÊèí‰ª∂ÈÖçÁΩÆ
</h3><p>ÂÖàÊääimagesÊñá‰ª∂Â§πÂçïÁã¨ÊîæÂà∞Â∑•‰ΩúÂå∫Èáå<br>
ÁÑ∂ÂêéÂú®Ctrl+Shift+PÊâìÂºÄÂëΩ‰ª§Èù¢ÊùøÔºåËøêË°åSFTP: configÂëΩ‰ª§<br>
sftp.jsonÁõÆÂΩï‰∏ã‰ºöÂá∫Áé∞‰∏Ä‰∏™Âêç‰∏∫ÁöÑÂü∫Êú¨ÈÖçÁΩÆÊñá‰ª∂.vscode<br>
<img src="/images/20230908121346.png"
	
	
	
	loading="lazy"
	
	
><br>
ÁÑ∂ÂêéÁºñËæë<br>
<strong><i class="fas fa-file"></i>sftp.json</strong></p>
<pre><code>{
    &quot;name&quot;: &quot;Hexo_images&quot;,
    &quot;host&quot;: &quot;mdwrite.winotmk.com&quot;,
    &quot;protocol&quot;: &quot;ftp&quot;,
    &quot;port&quot;: 21,
    &quot;username&quot;: &quot;root&quot;,
    &quot;password&quot;: &quot;****&quot;,
    &quot;remotePath&quot;: &quot;/hexo/Winblog/source/images&quot;,
    &quot;useTempFile&quot;: false,
    &quot;openSsh&quot;: false,
    &quot;uploadOnSave&quot;: false, 
    &quot;watcher&quot;: {
      &quot;files&quot;: &quot;**/*&quot;,
      &quot;autoUpload&quot;: true,
      &quot;autoDelete&quot;: true
    },
    &quot;syncOption&quot;: {
      &quot;delete&quot;: true
    }
}
</code></pre>
<p><code>&quot;watcher&quot;</code>ÊòØÁî®Êù•ËÆæÁΩÆËá™Âä®Êõ¥Êñ∞ÁöÑ<br>
ËøôÊ†∑Êàë‰ª¨Âú®mdÈáåÁ≤ò‰∫ÜÂõæÔºåÂ∞±‰ºöËá™Âä®‰∏ä‰º†Âà∞Âà∞ftpÁõÆÂΩï‰∏ä</p>
<p>ÂèÇËÄÉÔºö<br>
<a class="link" href="https://marketplace.visualstudio.com/items?itemName=Natizyskunk.sftp#remote-explorer"  target="_blank" rel="noopener"
    >https://marketplace.visualstudio.com/items?itemName=Natizyskunk.sftp#remote-explorer</a><br>
ÂºÄÂêØwatcherÊ®°ÂºèÔºåÂÆûÁé∞Â¢ûÂä†Êñá‰ª∂Êó∂Ëá™Âä®‰∏ä‰º†ÁõÆÂΩïÂêåÊ≠•<br>
<a class="link" href="https://github.com/Natizyskunk/vscode-sftp/blob/master/FAQ.md#automatically-sync-both-ways-without-user-interaction"  target="_blank" rel="noopener"
    >https://github.com/Natizyskunk/vscode-sftp/blob/master/FAQ.md#automatically-sync-both-ways-without-user-interaction</a></p>

</section>


    <footer class="article-footer">
    

    
    
    <header class="article-category">
        <div class="Winotmk_icon">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-category"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4h6v6h-6z" /><path d="M14 4h6v6h-6z" /><path d="M4 14h6v6h-6z" /><path d="M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /></svg>
        </div>
        
            <a href="/categories/docker/" >
                Docker
            </a>
        
    </header>
    

    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/posts/docker01.1_%E4%BB%B7%E6%A0%BC%E8%AE%A1%E7%AE%97%E8%A1%A8/">
        
        

        <div class="article-details">
            <h2 class="article-title">Docker01.1_eci‰ª∑Ê†ºËÆ°ÁÆóË°®</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/240925_calibre_web%E7%9A%84pdf%E5%B0%81%E9%9D%A2%E6%8F%90%E5%8F%96%E9%97%AE%E9%A2%98/">
        
        

        <div class="article-details">
            <h2 class="article-title">calibre_webÁöÑpdfÂ∞ÅÈù¢ÊèêÂèñÈóÆÈ¢ò</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/240815_%E7%BB%99docker%E5%AE%B9%E5%99%A8%E5%86%85%E9%85%8D%E7%BD%AE%E4%B8%AD%E6%96%87%E7%8E%AF%E5%A2%83/">
        
        

        <div class="article-details">
            <h2 class="article-title">ÁªôdockerÂÆπÂô®ÂÜÖÈÖçÁΩÆ‰∏≠ÊñáÁéØÂ¢É(minecraftÂºÄÊúçÁõ∏ÂÖ≥)</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/240724_%E7%94%A8%E5%AE%B9%E5%99%A8%E6%9D%A5%E8%BF%90%E8%A1%8Cstreamlit/">
        
        

        <div class="article-details">
            <h2 class="article-title">Áî®ÂÆπÂô®Êù•ËøêË°åstreamlit</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/240619_%E8%BD%AF%E4%BB%B6%E6%94%B6%E9%9B%86/">
        
        

        <div class="article-details">
            <h2 class="article-title">ËΩØ‰ª∂ÂíåÁΩëÁ´ôÊî∂ÈõÜ</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 winotmk
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> Customized and extended by <a href="https://winotmk.com" target="_blank" rel="noopener">Winotmk</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.6e41f30ac73d910b93ca490f6997cfe67ffc2ae732e5259b236ee69467402550.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

        
        
        
        <script>hljs.highlightAll();</script>
        
    </body>
</html>
